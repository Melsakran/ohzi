parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"RyjO":[function(require,module,exports) {
function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}var o=function(){function t(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];e(this,t),this.dpr=window.devicePixelRatio?window.devicePixelRatio:1,this.is_mobile=!1,this.is_ios=!1,this.vertex_image_unit_supported=!0,this.min_zoom_distance=3e3,this.max_zoom_distance=4e4,this.max_zoom_distance_scale=1.1,this.zoom_speed=.1,this.use_fxaa=!1,this.use_ssaa=!0,this.background_color=new THREE.Color(.768,.768,.768),this.touch_sensitivity=1.5,this.zoom_sensitivity=.7,this.spin_sensitivity=2,this.three_finger_rotation_speed=3,this.three_finger_allowed_x_rotation_offset=30,this.three_finger_allowed_y_rotation_offset=20,this.use_touch_gestures=!1,this.texture_float_supported=!1,this.use_ortographic=!0,this.hover_enabled=!1,this.rotation_enabled=!1,this.transparency_amount=.2,this.show_debug_sphere_on_floor_selection=!1,this.show_debug_sphere_on_steps_in_floor=!1,this.display_cleanup_log=!1,this.navigation_speed_damping=.74,this.navigation_speed=200,this.out_of_bounds_force=1.5,this.mouse_zoom_speed=.05,this.touch_zoom_speed=.5}return i(t,[{key:"from_json",value:function(e){}}]),t}(),s=new o;module.exports=s;
},{}],"gDca":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=function(){function n(){e(this,n)}return t(n,[{key:"render",value:function(){}},{key:"on_enter",value:function(e,n){}},{key:"on_exit",value:function(e,n){}},{key:"resize",value:function(){}}]),n}();exports.default=r;
},{}],"JIgx":[function(require,module,exports) {
"use strict";function e(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function i(e,i){for(var t=0;t<i.length;t++){var h=i[t];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(e,h.key,h)}}function t(e,t,h){return t&&i(e.prototype,t),h&&i(e,h),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var h=function(){function i(){e(this,i),this.width=1,this.height=1,this.width_height=new THREE.Vector2(this.width,this.height),this.screen_materials=[],this.native_width=this.width,this.native_height=this.height,this.pixel_size=new THREE.Vector2(1/this.width,1/this.height)}return t(i,[{key:"update_size",value:function(e,i){this.width=e,this.height=i,this.pixel_size=new THREE.Vector2(1/this.width,1/this.height),this.width_height.x=e,this.width_height.y=i;for(var t=this.screen_materials.length;t--;)this.screen_materials[t].uniforms._ScreenSize.value=this.width_height}},{key:"apply_pixel_density_v2",value:function(e){return e.multiplyScalar(1/window.devicePixelRatio),e}},{key:"apply_pixel_density",value:function(e){return e*(1/window.devicePixelRatio)}},{key:"update_native_size",value:function(){this.native_width=window.innerWidth,this.native_height=window.innerHeight}},{key:"add_screen_material",value:function(e){this.screen_materials.push(e),e.uniforms._ScreenSize.value=this.width_height}},{key:"remove_screen_material",value:function(e){var i=this.screen_materials.indexOf(e);i>-1&&this.screen_materials.splice(i,1)}},{key:"get_pixel_size",value:function(){return this.pixel_size}},{key:"aspect_ratio",get:function(){return this.width/this.height}}]),i}(),n=new h;exports.default=n;
},{}],"bFlA":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=function(){function t(){e(this,t)}return n(t,null,[{key:"opaque",get:function(){return 0}},{key:"transparent",get:function(){return 1}},{key:"outline",get:function(){return 2}},{key:"selectable",get:function(){return 3}}]),t}();exports.default=r;
},{}],"aRZG":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform sampler2D _MainTex;\nuniform sampler2D _Blur;\nuniform vec2 _Screen;\nvarying vec2 vUv;\n\nfloat aastep(float threshold, float value) {\n  #ifdef GL_OES_standard_derivatives\n    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;\n    return smoothstep(threshold-afwidth, threshold+afwidth, value);\n  #else\n    return step(threshold, value);\n  #endif  \n}\n\nvoid main()\n{\n\tvec2 pixel_size = 1.0/_Screen;\n\n\tvec4 color = texture2D( _MainTex, vUv);\n\tfloat mask = 1.0 - color.a;\n\n\tfloat blur = texture2D( _Blur, vUv).a;\n\n  // gl_FragColor = vec4(mask,mask,mask,0.0);\n  // gl_FragColor = color;\n\n\tgl_FragColor = vec4(mix(color.rgb, mix(color.rgb, vec3(1.,0.,0.),aastep(0.076, blur)), mask), 1.0);\n}\n\n";
},{}],"GnKT":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform sampler2D _MainTex;\nuniform vec2 _Resolution;\nuniform vec2 _SampleDir;\nvarying vec2 vUv;\n\nvoid main()\n{\n\n\tvec3 sum = vec3(0.,0.,0.);\n\tvec2 dir = (0.5/_Resolution) * _SampleDir;\n\tfloat _Distance = 2.0;\n\tsum += texture2D( _MainTex, vUv + dir * -4. * _Distance ).rgb * 0.0525;\n\tsum += texture2D( _MainTex, vUv + dir * -3. * _Distance ).rgb * 0.075;\n\tsum += texture2D( _MainTex, vUv + dir * -2. * _Distance ).rgb * 0.110;\n\tsum += texture2D( _MainTex, vUv + dir * -1. * _Distance ).rgb * 0.150;\n\tsum += texture2D( _MainTex, vUv + dir *  0. * _Distance ).rgb * 0.225;\n\tsum += texture2D( _MainTex, vUv + dir *  1. * _Distance ).rgb * 0.150;\n\tsum += texture2D( _MainTex, vUv + dir *  2. * _Distance ).rgb * 0.110;\n\tsum += texture2D( _MainTex, vUv + dir *  3. * _Distance ).rgb * 0.075;\n\tsum += texture2D( _MainTex, vUv + dir *  4. * _Distance ).rgb * 0.0525;\n\tgl_FragColor = vec4(sum, 1.0);\n\n}\n";
},{}],"s876":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform sampler2D _MainTex;\n\nvarying vec2 vUv;\nvoid main()\n{\n\tgl_FragColor = texture2D(_MainTex, vUv);\n}";
},{}],"i1za":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nvarying vec2 vUv;\nvoid main()\n{\n\tgl_Position = vec4(uv * 2.0 - 1.0, 1.0, 1.0);\n\tvUv = uv;\n}";
},{}],"LSxb":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform vec3 _Color;\n\nvoid main()\n{\n    gl_FragColor = vec4(_Color, 1.0);\n}";
},{}],"F9Xn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("/Screen")),r=o(require("/RenderLayers")),t=o(require("/shaders/box_blur/compose_frag")),a=o(require("/shaders/box_blur/box_blur_frag")),i=o(require("/shaders/copy/copy_frag")),n=o(require("/shaders/copy/copy_vert")),l=o(require("/shaders/basic_color/basic_color_frag"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function s(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _(e,r,t){return r&&s(e.prototype,r),t&&s(e,t),e}var d=function(){function o(r){u(this,o),this.main_rt=new THREE.WebGLRenderTarget(e.default.width,e.default.height),this.rt1=new THREE.WebGLRenderTarget(e.default.width,e.default.height),this.rt2=new THREE.WebGLRenderTarget(e.default.width,e.default.height),this.compose_material=this.__get_compose_material(),this.copy_material=this.__get_copy_material(),this.box_blur_material=this.__get_box_blur_material(),this.background_material=this.__get_background_material(),this.copy_plane=new THREE.Mesh(new THREE.PlaneGeometry(1,1),this.copy_material),this.copy_plane.frustumCulled=!1,this.copy_scene=new THREE.Scene,this.copy_scene.add(this.copy_plane)}return _(o,[{key:"resize",value:function(e,r){this.main_rt.setSize(e,r),this.rt1.setSize(e,r),this.rt2.setSize(e,r),this.box_blur_material.uniforms._Screen.value.set(e,r),this.compose_material.uniforms._Screen.value.set(e,r)}},{key:"render",value:function(e){e.camera.updateMatrix(),e.camera.updateMatrixWorld(),e.camera.layers.enable(r.default.opaque),e.camera.layers.enable(r.default.transparent),e.camera.layers.disable(r.default.outline),e._renderer.setClearColor(e.clear_color,0),e._renderer.clearTarget(this.main_rt,!0,!0,!0),this.copy_scene.overrideMaterial=this.background_material,this.background_material.uniforms._Color.value.set(e.clear_color.r,e.clear_color.g,e.clear_color.b,0),e._renderer.render(this.copy_scene,e.camera,this.main_rt,!1),e._renderer.render(e.scene,e.camera,this.main_rt,!1),this.box_blur_material.uniforms._MainTex.value=this.main_rt.texture,this.box_blur_material.uniforms._SampleDir.value.set(1,0),this.copy_scene.overrideMaterial=this.box_blur_material,e._renderer.render(this.copy_scene,e.camera,this.rt1,!1),this.box_blur_material.uniforms._SampleDir.value.set(0,1),this.box_blur_material.uniforms._MainTex.value=this.rt1.texture,e._renderer.render(this.copy_scene,e.camera,this.rt2,!1),this.copy_scene.overrideMaterial=this.compose_material,this.compose_material.uniforms._MainTex.value=this.main_rt.texture,this.compose_material.uniforms._Blur.value=this.rt2.texture,e._renderer.render(this.copy_scene,e.camera,void 0,!1),this.copy_scene.overrideMaterial=void 0}},{key:"__get_copy_material",value:function(){return new THREE.ShaderMaterial({uniforms:{_MainTex:{value:void 0}},vertexShader:n.default,fragmentShader:i.default,depthTest:!1,depthWrite:!1})}},{key:"__get_box_blur_material",value:function(){return new THREE.ShaderMaterial({uniforms:{_MainTex:{value:void 0},_SampleDir:{value:new THREE.Vector2},_Screen:{value:new THREE.Vector2(e.default.width,e.default.height)}},vertexShader:n.default,fragmentShader:a.default,depthTest:!1,depthWrite:!1})}},{key:"__get_compose_material",value:function(){return new THREE.ShaderMaterial({uniforms:{_MainTex:{value:void 0},_Blur:{value:void 0},_Screen:{value:new THREE.Vector2(e.default.width,e.default.height)}},vertexShader:n.default,fragmentShader:t.default,depthTest:!1,depthWrite:!1,extensions:{derivatives:!0}})}},{key:"__get_background_material",value:function(){return new THREE.ShaderMaterial({uniforms:{_Color:{value:new THREE.Vector4(0,0,0,0)}},vertexShader:n.default,fragmentShader:l.default,depthTest:!0,depthWrite:!1})}},{key:"on_enter",value:function(e){e._renderer.autoClear=!1}},{key:"on_exit",value:function(e){e._renderer.autoClear=!0}}]),o}();exports.default=d;
},{"/Screen":"JIgx","/RenderLayers":"bFlA","/shaders/box_blur/compose_frag":"aRZG","/shaders/box_blur/box_blur_frag":"GnKT","/shaders/copy/copy_frag":"s876","/shaders/copy/copy_vert":"i1za","/shaders/basic_color/basic_color_frag":"LSxb"}],"XMgG":[function(require,module,exports) {
function n(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function e(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function t(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}var r=function(){function e(){n(this,e),this._current=void 0}return t(e,[{key:"current",set:function(n){this._current=n},get:function(){return this._current}}]),e}(),o=new r;module.exports=o;
},{}],"qvMM":[function(require,module,exports) {
function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var r=function(){function n(){e(this,n),this._current=new THREE.Scene,this._current.name="default_scene"}return t(n,[{key:"add_scene",value:function(e){}},{key:"current",get:function(){return this._current},set:function(e){this._current=e}}]),n}(),u=new r;module.exports=u;
},{}],"wewU":[function(require,module,exports) {
function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var _=t[i];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(e,_.key,_)}}function i(e,i,_){return i&&t(e.prototype,i),_&&t(e,_),e}var _=function(){function t(){e(this,t),this.___time=new THREE.Clock,this.__delta_time=0,this.__elapsed_time=0,this.__allocated_time=new THREE.Vector2(0,0)}return i(t,[{key:"__update",value:function(){this.__delta_time=this.___time.getDelta(),this.__elapsed_time=this.___time.getElapsedTime()}},{key:"delta_time",get:function(){return this.__delta_time<.4?this.__delta_time:.016}},{key:"elapsed_time",get:function(){return this.__elapsed_time}},{key:"shader_time",get:function(){return this.__allocated_time.x=this.delta_time,this.__allocated_time.y=this.elapsed_time,this.__allocated_time}}]),t}(),a=new _;module.exports=a;
},{}],"Oo8n":[function(require,module,exports) {
"use strict";function e(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function s(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.KeyboardInput=void 0;var n=function(){function s(){e(this,s),this.ctrlz_pressed=!1,this.ctrlz_fired=!1,this.keys=[]}return t(s,[{key:"init",value:function(){document.onkeydown=this.on_key_down.bind(this),document.onkeyup=this.on_key_up.bind(this),document.onkeypress=this.on_key_press.bind(this)}},{key:"on_key_down",value:function(e){90==e.keyCode&&e.ctrlKey&&!this.ctrlz_fired&&(this.ctrlz_pressed=!0,this.ctrlz_fired=!0),e.key&&this.press_key(e.key)}},{key:"on_key_press",value:function(e){}},{key:"on_key_up",value:function(e){this.release_keys()}},{key:"clear",value:function(){this.ctrlz_pressed=!1;for(var e=0;e<this.keys.length;e++)this.keys[e].pressed=!1}},{key:"release_keys",value:function(){this.ctrlz_fired=!1;for(var e=0;e<this.keys.length;e++)this.keys[e].fired=!1,this.keys[e].down=!1}},{key:"press_key",value:function(e){for(var s=0;s<this.keys.length;s++)this.keys[s].key_name!==e||this.keys[s].fired||(this.keys[s].pressed=!0,this.keys[s].down=!0,this.keys[s].fired=!0)}},{key:"key_is_pressed",value:function(e){for(var s=0;s<this.keys.length;s++)if(this.keys[s].key_name===e)return this.keys[s].pressed;return!1}},{key:"key_is_down",value:function(e){for(var s=0;s<this.keys.length;s++)if(this.keys[s].key_name===e)return this.keys[s].down;return!1}},{key:"register_key",value:function(e){this.keys.push({key_name:e,pressed:!1,down:!1,up:!1,fired:!1})}},{key:"unregister_key",value:function(e){for(var s=void 0,t=0;t<this.keys.length;t++)this.keys[t].key_name===e&&(s=this.keys[t]);var n=this.keys.indexOf(s);n>-1&&this.keys.splice(n,1)}}]),s}();exports.KeyboardInput=n;var i=new n;module.exports=i;
},{}],"k3P6":[function(require,module,exports) {
"use strict";var t=o(require("/Screen")),e=o(require("/Configuration")),i=o(require("/Time")),s=o(require("/KeyboardInput"));function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function a(t,e,i){return e&&_(t.prototype,e),i&&_(t,i),t}var u=function(){function e(){n(this,e),this.mouse_pos=new THREE.Vector2,this.last_mouse_pos=new THREE.Vector2,this.mouse_dir=new THREE.Vector2,this.__clicked_time=0,this.__elapsed_time=0,this.__delta_time=0,this.is_mouse_down=!1,this.is_mouse_up=!1,this.rotation_angle=0,this._normalized_mouse_pos=new THREE.Vector2(0,0),this.left_mouse_button_down=!1,this.left_mouse_button_pressed=!1,this.left_mouse_button_released=!1,this.middle_mouse_button_down=!1,this.right_mouse_button_down=!1,this.right_mouse_button_pressed=!1,this.right_mouse_button_released=!1,this.mousewheel=0,this.previous_scale=0,this.previous_rotation=0,this.previous_rotation_dirty=!0,this.mouse_str="mouse",this.tmp_mouse_velocity=new THREE.Vector2,this.bounding_client=new THREE.Vector2,this.multitouch_active=!1,this.tapped=!1,this.initial_zoom_distance=100,this.zoom_center=new THREE.Vector2,this.zoom_started=!1,this.touch_zoom=1,this.multi_touch_dir=new THREE.Vector2,this.wheel_delta=0,this.mac="mac",this.pinching_with_trackpad=!1,this.scrolling_with_trackpad=!1,this.scrolling_with_mouse=!1,this.double_click=!1,this.canvas=void 0}return a(e,[{key:"mouse_is_within_bounds",value:function(){var t=this.canvas.getBoundingClientRect();return this.mouse_pos.x>t.left&&this.mouse_pos.x<t.left+t.width&&this.mouse_pos.y>t.top&&this.mouse_pos.y<t.top+t.height}},{key:"init",value:function(t,e){var i=this;this.canvas=e;var o=new ZingTouch.Region(t,!1,!1);s.default.init();var n=this;o.bind(t,"tap",function(t){n.tapped=!0,n.set_mouse_pos(t)}),window.addEventListener("dblclick",this.on_double_click.bind(this)),t.addEventListener("mouseleave",this.on_focus_lost.bind(this));var _=new ZingTouch.Pan({numInputs:1});o.register("one_finger_pan",_),o.bind(t,"one_finger_pan",function(t){t.detail.data.length>0&&n.on_mouse_move(t)});var a=new ZingTouch.Pan({numInputs:2});o.register("two_fingers_pan",a),o.bind(t,"two_fingers_pan",function(t){t.detail.data.length>0&&(n.multi_touch_dir.set(t.detail.data[0].change.x,t.detail.data[0].change.y),n.multi_touch_dir.multiplyScalar(n.__delta_time))});var u=new ZingTouch.Pan({numInputs:3});o.register("three_fingers_pan",u),o.bind(t,"three_fingers_pan",function(t){t.detail.data.length>0&&(n.multi_touch_dir.set(t.detail.data[0].change.x,t.detail.data[0].change.y),n.multi_touch_dir.multiplyScalar(n.__delta_time))}),o.bind(t,"distance",function(t){n.zoom_started||(n.zoom_started=!0,n.touch_zoom_delta=0,n.initial_zoom_distance=t.detail.distance,n.last_zoom_distance=t.detail.distance,n.zoom_center.set(t.detail.center.x,t.detail.center.y),n.mouse_pos.set(t.detail.center.x,t.detail.center.y)),n.touch_zoom_delta=t.detail.distance-n.last_zoom_distance,n.last_zoom_distance=t.detail.distance,n.touch_zoom=1},!1);var h=new ZingTouch.Gesture;h.end=function(t,e,i){n.on_mouse_up(t)},h.start=function(t,e,i){n.on_mouse_down(t)},o.register("shortTap",h),o.bind(t,"shortTap",function(t){}),window.addEventListener("wheel",this.on_mouse_wheel.bind(this)),t.addEventListener("mousemove",function(t){i.mouse_pos.x=t.clientX,i.mouse_pos.y=t.clientY,i.scrolling_with_mouse=!1,i.scrolling_with_trackpad=!1,i.pinching_with_trackpad=!1})}},{key:"set_mouse_pos",value:function(t){this.mouse_pos.x=t.detail.events[0].clientX,this.mouse_pos.y=t.detail.events[0].clientY}},{key:"is_mac",value:function(){return this.get_os()===this.mac}},{key:"on_double_click",value:function(t){this.double_click=!0}},{key:"on_mouse_wheel",value:function(t){this.mouse_pos.x=t.clientX,this.mouse_pos.y=t.clientY,this.is_mac()?t.ctrlKey?(console.log("Pinching with a touchpad",t.deltaY),this.pinching_with_trackpad=!0,this.scrolling_with_trackpad=!1,this.scrolling_with_mouse=!1):this.is_int(t.deltaY)?(this.pinching_with_trackpad=!1,this.scrolling_with_trackpad=!0,this.scrolling_with_mouse=!1,this.wheel_delta=1-t.deltaY/350*2-1):(this.pinching_with_trackpad=!1,this.scrolling_with_trackpad=!1,this.scrolling_with_mouse=!0,this.wheel_delta=t.deltaY/Math.abs(t.deltaY)):(this.pinching_with_trackpad=!1,this.scrolling_with_trackpad=!1,this.scrolling_with_mouse=!0,this.wheel_delta=t.deltaY/Math.abs(t.deltaY))}},{key:"on_mouse_down",value:function(t){switch(this.mouse_pos.x=t[0].current.clientX,this.mouse_pos.y=t[0].current.clientY,this.multitouch_active=t.length>1,this.mouse_dir.x=0,this.mouse_dir.y=0,this.__clicked_time=this.__elapsed_time,this.is_mouse_down=!0,this.is_mouse_up=!1,t[0].current.originalEvent.which){case 1:this.left_mouse_button_down=!0,this.left_mouse_button_pressed=!0;break;case 2:this.middle_mouse_button_down=!0;break;case 3:this.right_mouse_button_down=!0,this.right_mouse_button_pressed=!0;break;default:this.left_mouse_button_down=!0,this.left_mouse_button_pressed=!0}this.wheel_delta=0,this.previous_scale=0,this.previous_rotation=0}},{key:"mouse_clicked",value:function(){return this.tapped}},{key:"on_mouse_up",value:function(t){if(this.multitouch_active=!!t&&t.length>1,this.is_mouse_up=!0,this.zoom_started=!1,this.touch_zoom=1,this.mouse_dir.x=0,this.mouse_dir.y=0,this.previous_scale=0,this.previous_rotation=0,this.wheel_delta=0,this.left_mouse_button_down=!1,this.middle_mouse_button_down=!1,this.right_mouse_button_down=!1,t)switch(t[0].current.originalEvent.which){case 1:this.left_mouse_button_released=!0;break;case 2:this.middle_mouse_button_released=!0;break;case 3:this.right_mouse_button_released=!0;break;default:this.left_mouse_button_released=!0}this.is_mouse_down=!1,this.previous_rotation_dirty=!0,this.rotation_delta=0}},{key:"on_focus_lost",value:function(){this.on_mouse_up(),this.left_mouse_button_released=!0,this.middle_mouse_button_released=!0,this.right_mouse_button_released=!0,this.left_mouse_button_released=!0}},{key:"time_since_last_mouse_down",value:function(){return this.__elapsed_time-this.__clicked_time}},{key:"on_mouse_move",value:function(t){t.detail.data.length>0&&(this.set_mouse_pos(t),this.mouse_dir.set(t.detail.data[0].change.x,t.detail.data[0].change.y))}},{key:"get_os",value:function(){var t=window.navigator.userAgent,e=window.navigator.platform,i=null;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(e)?i="mac":-1!==["iPhone","iPad","iPod"].indexOf(e)?i="ios":-1!==["Win32","Win64","Windows","WinCE"].indexOf(e)?i="windows":/Android/.test(t)?i="android":!i&&/Linux/.test(e)&&(i="linux"),i}},{key:"is_int",value:function(t){return t%1==0}},{key:"clear",value:function(){this.__elapsed_time=i.default.elapsed_time,this.__delta_time=i.default.delta_time,this.is_mouse_up=!1,this.wheel_delta=0,this.rotation_delta=0,this.double_click=!1,this.tapped=!1,this.mouse_dir.multiplyScalar(0),this.multi_touch_dir.multiplyScalar(0),this.left_mouse_button_pressed=!1,this.left_mouse_button_released=!1,this.right_mouse_button_pressed=!1,this.right_mouse_button_released=!1,s.default.clear()}},{key:"normalized_mouse_pos",get:function(){return this._normalized_mouse_pos.x=this.mouse_pos.x/t.default.width*2-1,this._normalized_mouse_pos.y=-1*(this.mouse_pos.y/t.default.height*2-1),this._normalized_mouse_pos}},{key:"NDC",get:function(){return this.normalized_mouse_pos}}]),e}(),h=new u;module.exports=h;
},{"/Screen":"JIgx","/Configuration":"RyjO","/Time":"wewU","/KeyboardInput":"Oo8n"}],"yntx":[function(require,module,exports) {
"use strict";var e=t(require("/Input"));function t(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var u=function(){function t(){n(this,t),this.ui_elements=[],this._tmp_normalized_pos=new THREE.Vector2,this.scene=new THREE.Scene,this.scene.autoUpdate=!1,this.scene.frustumCulled=!1}return s(t,[{key:"add_clickable_element",value:function(e){this.ui_elements.push(e),this.scene.add(e.mesh)}},{key:"remove_clickable_element",value:function(e){var t=this.ui_elements.indexOf(e);t>-1&&this.ui_elements.splice(t,1),this.scene.remove(e.mesh)}},{key:"update",value:function(){this._tmp_normalized_pos.copy(e.default.normalized_mouse_pos);for(var t=0;t<this.ui_elements.length;t++)this.ui_elements[t].update(this._tmp_normalized_pos)}},{key:"render",value:function(e){e.render_ui(this.scene)}},{key:"clear",value:function(){this.current_clicked_element=void 0}},{key:"resize",value:function(){for(var e=0;e<this.ui_elements.length;e++)this.ui_elements[e].resize()}}]),t}(),r=new u;module.exports=r;
},{"/Input":"k3P6"}],"hZlU":[function(require,module,exports) {
function a(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}var t=function t(){a(this,t),this.max_anisotropy=0,this.vertex_texture_sampler_available=!1,this.fp_textures_available=!1},e=new t;module.exports=e;
},{}],"Ftca":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("/shaders/copy/copy_vert")),e=r(require("/shaders/copy/copy_frag"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,r=p(t);if(s()){var n=p(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)}}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(r){c(i,THREE.ShaderMaterial);var n=f(i);function i(r,c,f){var a;return u(this,i),n.call(this,(o(a={uniforms:{_MainTex:{value:null},_Resolution:{value:new THREE.Vector2(0,0)}},defines:f||{},vertexShader:c||t.default,fragmentShader:r||e.default,depthWrite:!1,blending:THREE.NoBlending,depthTest:!1},"depthWrite",!1),o(a,"depthFunc",THREE.AlwaysDepth),a))}return i}();exports.default=y;
},{"/shaders/copy/copy_vert":"i1za","/shaders/copy/copy_frag":"s876"}],"qoY1":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nuniform vec4 _DepthNormal;\nvec2 EncodeFloatRG( float v )\n{\n    vec2 kEncodeMul = vec2(1.0, 255.0);\n    float kEncodeBit = 1.0/255.0;\n    vec2 enc = kEncodeMul * v;\n    enc = fract (enc);\n    enc.x -= enc.y * kEncodeBit;\n    return enc;\n}\n\nvec2 EncodeNormal (vec3 n)\n{\n    float scale = 1.7777;\n    vec2 enc = n.xy / (n.z+1.0);\n    enc /= scale;\n    enc = enc*0.5+0.5;\n    return enc;\n}\n\nvoid main()\n{\n    gl_FragColor = vec4(EncodeFloatRG(_DepthNormal.x), EncodeNormal(normalize(_DepthNormal.yzw)));  \n}";
},{}],"bGMu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("/materials/BlitMaterial")),e=r(require("/shaders/clear/clear_depth_normal_frag"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){return function(){var e,r=s(t);if(l()){var n=s(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return i(this,e)}}function i(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(r){u(c,t.default);var n=f(c);function c(t,r){var u;return o(this,c),(u=n.call(this,e.default)).uniforms._DepthNormal={value:new THREE.Vector4(t,r.x,r.y,r.z)},u}return c}();exports.default=p;
},{"/materials/BlitMaterial":"Ftca","/shaders/clear/clear_depth_normal_frag":"qoY1"}],"DRHE":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nvarying vec3 v_normal;\nvarying vec3 v_pos;\n\nvoid main()\n{\n  vec3 pos = position;\n  mat4 MVP = projectionMatrix * modelViewMatrix;\n\n  v_normal \t= (modelViewMatrix * vec4(normal, 0.0)).xyz;\n  v_pos \t\t= (modelViewMatrix * vec4( pos, 1.0 )).xyz;\n\n  gl_Position = MVP * vec4( pos, 1.0 );\n}";
},{}],"a4Wy":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nvarying vec3 v_normal;\nvarying vec3 v_pos;\n\nuniform float _FarPlane;\n\nvec2 EncodeFloatRG( float v )\n{\n    vec2 kEncodeMul = vec2(1.0, 255.0);\n    float kEncodeBit = 1.0/255.0;\n    vec2 enc = kEncodeMul * v;\n    enc = fract (enc);\n    enc.x -= enc.y * kEncodeBit;\n    return enc;\n}\n\nvec2 EncodeNormal (vec3 n)\n{\n    float scale = 1.7777;\n    vec2 enc = n.xy / (n.z+1.0);\n    enc /= scale;\n    enc = enc*0.5+0.5;\n    return enc;\n}\n\nvoid main()\n{\n\tgl_FragColor = vec4(EncodeFloatRG(length(v_pos.z)/_FarPlane), EncodeNormal(normalize(v_normal)));\t\n}\n\n";
},{}],"VcOC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("/shaders/depth_normals/depth_normals_vert")),e=r(require("/shaders/depth_normals/depth_normals_frag"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return function(){var e,r=y(t);if(p()){var n=y(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return l(this,e)}}function l(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(r){c(u,THREE.ShaderMaterial);var n=a(u);function u(){return o(this,u),n.call(this,{uniforms:{_FarPlane:{value:1}},vertexShader:t.default,fragmentShader:e.default})}return f(u,[{key:"far_plane",set:function(t){this.uniforms._FarPlane.value=t}}]),u}();exports.default=h;
},{"/shaders/depth_normals/depth_normals_vert":"DRHE","/shaders/depth_normals/depth_normals_frag":"a4Wy"}],"pWL9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("/CameraManager")),t=n(require("/SceneManager")),r=n(require("/Screen")),a=n(require("/materials/ClearDepthNormalMaterial")),i=n(require("/materials/DepthNormalMaterial"));function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}var o=function(){function t(){l(this,t),this.RT=new THREE.WebGLRenderTarget(r.default.width,r.default.height),this.clear_depth_normal_mat=new a.default(1,new THREE.Vector3(0,0,1)),this.depth_normal_material=new i.default}return h(t,[{key:"render",value:function(t){this.__resize_RT_if_necessary(),t.clear(this.RT,void 0,!0,!0),t.blit_clear_with_material(this.RT,this.clear_depth_normal_mat),this.depth_normal_material.far_plane=e.default.current.far,t.render(void 0,void 0,this.RT,this.depth_normal_material)}},{key:"__resize_RT_if_necessary",value:function(){this.RT.width===r.default.width&&this.RT.height===r.default.height||this.RT.setSize(r.default.width,r.default.height)}},{key:"render_target",get:function(){return this.RT}}]),t}();exports.default=o;
},{"/CameraManager":"XMgG","/SceneManager":"qvMM","/Screen":"JIgx","/materials/ClearDepthNormalMaterial":"bGMu","/materials/DepthNormalMaterial":"VcOC"}],"IerZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("/materials/BlitMaterial"));function t(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}var l=function(){function t(r){i(this,t),this.renderer=r,this._blit_scene=new THREE.Scene,this._blit_material=new e.default,this._blit_quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(1,1),this._blit_material),this._blit_scene.add(this._blit_quad),this._blit_camera=new THREE.OrthographicCamera(-1,1,1,-1,-1e4,1e4)}return a(t,[{key:"blit",value:function(e,t){this._blit_quad.material=this._blit_material,this._blit_quad.material.uniforms._MainTex.value=e.texture,this._blit_quad.material.uniforms._Resolution.value.set(e.width,e.height),this.renderer.setRenderTarget(void 0===t?null:t),this.renderer.render(this._blit_scene,this._blit_camera)}},{key:"blit_with_material",value:function(e,t,i){this._blit_quad.material=i,this._blit_quad.material.uniforms._MainTex.value=e.texture,this._blit_quad.material.uniforms._Resolution.value.set(e.width,e.height),this.renderer.setRenderTarget(void 0===t?null:t),this.renderer.render(this._blit_scene,this._blit_camera)}},{key:"blit_clear_with_material",value:function(e,t){this._blit_quad.material=t,this.renderer.setRenderTarget(void 0===e?null:e),this.renderer.render(this._blit_scene,this._blit_camera)}}]),t}();exports.default=l;
},{"/materials/BlitMaterial":"Ftca"}],"xMH9":[function(require,module,exports) {
"use strict";var e=_(require("/Configuration")),r=_(require("/render_mode/BaseRender")),t=_(require("/render_mode/OutlineRender")),i=_(require("/Screen")),n=_(require("/CameraManager")),d=_(require("/SceneManager")),u=_(require("/UI")),l=_(require("/Capabilities")),s=_(require("/render_utilities/DepthAndNormalsRenderer")),o=_(require("/render_utilities/Blitter"));function _(e){return e&&e.__esModule?e:{default:e}}function h(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function c(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,r,t){return r&&c(e.prototype,r),t&&c(e,t),e}var m=function(){function t(){h(this,t),this._renderer=void 0,this.blitter=void 0,this.dom=void 0,this.no_render=void 0,this.current_render_mode=void 0,this.generateDepthNormalTexture=!1,this.depth_and_normals_renderer=void 0}return f(t,[{key:"init",value:function(t){this._renderer=new THREE.WebGLRenderer({antialias:!1,preserveDrawingBuffer:!0,alpha:!0,canvas:t}),this._renderer.autoClear=!1,e.default.is_mobile?this._renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)):this._renderer.setPixelRatio(Math.min(Math.max(window.devicePixelRatio,1.5),2)),this._renderer.extensions.get("ANGLE_instanced_arrays"),this.blitter=new o.default(this._renderer),this.dom=this._renderer.domElement,this.no_render=new r.default,this.current_render_mode=this.no_render,l.default.max_anisotropy=this._renderer.capabilities.getMaxAnisotropy(),l.default.vertex_texture_sampler_available=this._renderer.capabilities.maxVertexTextures>0,l.default.fp_textures_available=this._renderer.capabilities.floatVertexTextures,this.generateDepthNormalTexture=!1,this.depth_and_normals_renderer=new s.default}},{key:"append_canvas",value:function(e){this.dom.id=e.id+"-canvas",this.container=e,this.on_resize()}},{key:"set_state",value:function(e){console.log("VIEWAPI - map render mode switch to: "+e.constructor.name),this.current_render_mode.on_exit(this,this._renderer),this.current_render_mode=e,this.current_render_mode.on_enter(this,this._renderer)}},{key:"update",value:function(){this.generateDepthNormalTexture&&this.depth_and_normals_renderer.render(this),n.default.current&&(n.default.current.aspect=i.default.aspect_ratio,n.default.current.updateProjectionMatrix(),n.default.current.updateMatrix(),n.default.current.updateMatrixWorld(!0),this.current_render_mode.render())}},{key:"render",value:function(e,r,t,i){this.__apply_override_material(e,i),this._renderer.setRenderTarget(void 0===t?null:t),this._renderer.render(e||d.default.current,r||n.default.current),this.__apply_override_material(e,void 0)}},{key:"__apply_override_material",value:function(e,r){e?e.overrideMaterial=r:d.default.current.overrideMaterial=r}},{key:"readback_RT",value:function(e,r){this._renderer.readRenderTargetPixels(e,0,0,e.width,e.height,r)}},{key:"clear",value:function(e,r,t,i){this._renderer.setRenderTarget(void 0===e?null:e),r&&this._renderer.setClearColor(r.clear_color,r.clear_alpha),this._renderer.clear(!!r,!!t,!!i)}},{key:"render_ui",value:function(e){this._renderer.render(e,n.default.current)}},{key:"on_resize",value:function(){var e=this.container.offsetWidth,r=this.container.offsetHeight;i.default.update_size(e,r),i.default.update_native_size(),this._renderer.setSize(e,r,!1),u.default.resize(),this.current_render_mode.resize(e,r)}},{key:"blit",value:function(e,r,t){t?this.blitter.blit_with_material(e,r,t):this.blitter.blit(e,r)}},{key:"blit_clear_with_material",value:function(e,r){this.blitter.blit_clear_with_material(e,r)}},{key:"take_screenshot",value:function(e){var r=i.default.width,t=i.default.height,a=parseInt(Math.ceil(4)),d=parseInt(Math.ceil(4));i.default.update_size(1024,1024),this._renderer.setPixelRatio(1),this._renderer.setSize(1024,1024,!1),this.ctx_2D.canvas.width=4096,this.ctx_2D.canvas.height=4096,n.default.current.aspect=i.default.aspect_ratio,n.default.current.updateMatrix(),n.default.current.updateMatrixWorld(!0);for(var u=0;u<a;u++)for(var l=0;l<d;l++)n.default.current.setViewOffset(4096,4096,i.default.width*u,i.default.height*l,i.default.width,i.default.height),this.current_render_mode.render(),this.ctx_2D.drawImage(this._renderer.domElement,i.default.width*u,i.default.height*l);this.ctx_2D.canvas.toBlob(e,"image/png;base64;"),n.default.current.clearViewOffset(),i.default.update_size(r,t),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(r,t,!1),n.default.current.aspect=i.default.aspect_ratio,n.default.current.updateMatrix(),n.default.current.updateMatrixWorld(!0)}},{key:"download_screenshot",value:function(e){console.log("el blob",e);var r=document.createElement("a");r.download="Snapshot.png",r.href=URL.createObjectURL(e),r.click(),r.onclick=function(){requestAnimationFrame(function(){URL.revokeObjectURL(a.href)}),a.removeAttribute("href")}}},{key:"dom_element",get:function(){return this._renderer.domElement}},{key:"depth_normals_RT",get:function(){return this.depth_and_normals_renderer.render_target}}]),t}(),p=new m;module.exports=p;
},{"/Configuration":"RyjO","/render_mode/BaseRender":"gDca","/render_mode/OutlineRender":"F9Xn","/Screen":"JIgx","/CameraManager":"XMgG","/SceneManager":"qvMM","/UI":"yntx","/Capabilities":"hZlU","/render_utilities/DepthAndNormalsRenderer":"pWL9","/render_utilities/Blitter":"IerZ"}],"xAef":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){return function(){var t,r=s(e);if(f()){var n=s(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return u(this,t)}}function u(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?a(t):r}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var l=function(e){o(c,THREE.Object3D);var r=i(c);function c(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t(this,c),e=r.call(this);var o=new THREE.LineBasicMaterial({color:4474111,depthFunc:THREE.AlwaysDepth}),i=new THREE.Geometry;i.vertices.push(new THREE.Vector3(0,0,0)),i.vertices.push(new THREE.Vector3(0,0,1e3));var u=new THREE.Line(i,o);u.renderOrder=5e4;var a=new THREE.LineBasicMaterial({color:4521796,depthFunc:THREE.AlwaysDepth}),f=new THREE.Geometry;f.vertices.push(new THREE.Vector3(0,0,0)),f.vertices.push(new THREE.Vector3(0,1e3,0));var s=new THREE.Line(f,a);s.renderOrder=5e4;var l=new THREE.LineBasicMaterial({linewidth:100,color:16729156,depthFunc:THREE.AlwaysDepth}),p=new THREE.Geometry;p.computeLineDistances(),p.vertices.push(new THREE.Vector3(0,0,0)),p.vertices.push(new THREE.Vector3(1e3,0,0));var y=new THREE.Line(p,l);return y.renderOrder=5e4,e.renderOrder=1e5,e.add(u),e.add(s),e.add(y),e.scale.set(n,n,n),e}return n(c,[{key:"update",value:function(){}},{key:"dispose",value:function(){}}]),c}();exports.default=l;
},{}],"QfnR":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main()\n{\n  vec3 pos = position;\n  mat4 MVP = projectionMatrix * modelViewMatrix;\n\n  gl_Position = MVP * vec4( pos, 1.0 );\n  vUv = uv;\n}";
},{}],"iaBK":[function(require,module,exports) {
module.exports="#define GLSLIFY 1\nvoid main()\n{\n  vec3 pos = position;\n  mat4 MVP = projectionMatrix * modelViewMatrix;\n\n  gl_Position = MVP * vec4( pos, 1.0 );\n  //gl_Position.zw -= 0.1;\n}";
},{}],"ezmQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("/editor/shaders/object_picker_vert")),t=r(require("/editor/shaders/object_picker_frag"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return function(){var t,r=_(e);if(y()){var n=_(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return f(this,t)}}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(r){u(a,THREE.Mesh);var n=c(a);function a(e,t){var r;return o(this,a),(r=n.call(this,e,t))._selectable_material=r.__get_selectable_material(),r.original_material=r.material,r.stored_layers=r.layers.mask,r}return i(a,[{key:"__get_selectable_material",value:function(){return new THREE.ShaderMaterial({uniforms:{_Color:{value:new THREE.Color}},vertexShader:e.default,fragmentShader:t.default})}},{key:"restore_material",value:function(){this.material=this.original_material}},{key:"store_layer_state",value:function(){this.stored_layers=this.layers.mask}},{key:"restore_layer_state",value:function(){this.layers.mask=this.stored_layers}},{key:"selectable_material",get:function(){return this._selectable_material}}]),a}();exports.default=p;
},{"/editor/shaders/object_picker_vert":"iaBK","/editor/shaders/object_picker_frag":"LSxb"}],"wyL4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("/Mesh"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){return function(){var e,r=s(t);if(l()){var n=s(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return f(this,e)}}function f(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var a=function(e){o(u,t.default);var r=c(u);function u(t,e,o){n(this,u),t=t||new THREE.Vector3(1,1,1),e=e||new THREE.Vector3(1,1,1),o=o||16711680;var c=new THREE.BoxGeometry(t.x,t.y,t.z,e.x,e.y,e.z),f=new THREE.MeshBasicMaterial({color:o});return r.call(this,c,f)}return u}();exports.default=a;
},{"/Mesh":"ezmQ"}],"sPjl":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){return function(){var e,r=i(t);if(f()){var n=i(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return c(this,e)}}function c(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?u(e):r}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=function(t){r(c,THREE.Mesh);var n=o(c);function c(t,r){e(this,c),r=r||"#FF0000",t=t||1;var o=new THREE.SphereBufferGeometry(t,64,64),u=new THREE.MeshBasicMaterial({color:r});return n.call(this,o,u)}return c}();exports.default=s;
},{}],"J9UP":[function(require,module,exports) {
"use strict";var e=c(require("/components/AxisHelper")),r=c(require("/shaders/basic_color/basic_color_vert")),t=c(require("/shaders/basic_color/basic_color_frag")),n=c(require("/SceneManager")),a=c(require("/Graphics")),o=c(require("/primitives/Cube")),i=c(require("/primitives/Sphere"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function l(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,r,t){return r&&l(e.prototype,r),t&&l(e,t),e}var s=function(){function a(){u(this,a),this.Vector3_one=new THREE.Vector3(1,1,1),this.Vector3_zero=new THREE.Vector3(0,0,0),this.canvas_renderer=void 0,this.rt_debug=void 0}return d(a,[{key:"init",value:function(e){this.webgl=e,this.ctx=void 0}},{key:"draw_axis",value:function(){var r=new e.default;return n.default.current.add(r),r}},{key:"set_debug_RT",value:function(e){this.rt_debug=e}},{key:"draw_rectangle",value:function(e,r,t,n){r=r||100,t=t||100,this.ctx.fillStyle=n||"rgba(255, 0, 0, 1)",this.ctx.fillRect(e.x-r/2,this.ctx.canvas.height-e.y-t/2,r,t)}},{key:"clear",value:function(){this.ctx&&this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}},{key:"draw_line_2D",value:function(e,r,t){this.ctx.strokeStyle=t||"rgba(255, 0, 0, 1)",this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y),this.ctx.lineTo(r.x,r.y),this.ctx.closePath(),this.ctx.stroke()}},{key:"draw_line",value:function(e,r,t){t=t||16711680;var a=new THREE.LineBasicMaterial({color:t}),o=new THREE.Geometry;o.vertices.push(e),o.vertices.push(r);var i=new THREE.Line(o,a);return n.default.current.add(i),i}},{key:"draw_cube",value:function(e,r,t){r=r||1,t=t||16711680,e=e||new THREE.Vector3;var a=new o.default(new THREE.Vector3(r,r,r),void 0,t);return a.position.copy(e),n.default.current.add(a),a}},{key:"draw_oriented_cube",value:function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#FF0000",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,c=e.distanceTo(r),u=new o.default(new THREE.Vector3(i,t,c),void 0,a),l=r.clone().sub(e).multiplyScalar(.5),d=l.clone().normalize();l.add(e),u.position.copy(l);var s=new THREE.Vector3(0,1,0);d.clone().clone().cross(s);return u.quaternion.setFromUnitVectors(new THREE.Vector3(0,0,-1),d),n.default.current.add(u),u}},{key:"draw_plane",value:function(e,a,o){var i=new THREE.PlaneGeometry(e,a),c=new THREE.ShaderMaterial({uniforms:{_Color:{value:new THREE.Vector4(0,1,0,.2)}},vertexShader:r.default,fragmentShader:t.default,transparent:!0,depthWrite:!1}),u=new THREE.Mesh(i,c);return u.renderOrder=-1e4,n.default.current.add(u),u}},{key:"draw_empty_cube",value:function(e,r,t){r=r||1,t=t||16711680;var n=(new THREE.Box3).setFromCenterAndSize(new THREE.Vector3,new THREE.Vector3(r,r,r)),a=new THREE.Box3Helper(n,t);return a.position.copy(e||new THREE.Vector3),a}},{key:"draw_sphere",value:function(e,r,t){r=r||1,t=t||16711680,e=e||new THREE.Vector3;var a=new i.default(r,t);return a.position.copy(e),n.default.current.add(a),a}},{key:"draw_sphere_helper",value:function(e,r){r=r||16711680;var t=new THREE.SphereGeometry(e.radius,32,32),a=new THREE.MeshBasicMaterial({color:r,side:THREE.DoubleSide});e=new THREE.Mesh(t,a);n.default.current.add(e)}},{key:"draw_math_sphere",value:function(e){var a=new THREE.SphereGeometry(e.radius,32,32),o=new THREE.ShaderMaterial({uniforms:{_Color:{value:new THREE.Vector4(1,0,0,.2)}},vertexShader:r.default,fragmentShader:t.default,transparent:!0}),i=new THREE.Mesh(a,o);i.position.copy(e.center),n.default.current.add(i)}},{key:"draw_bounding_box",value:function(e){var r=new THREE.Box3Helper(e,16776960);n.default.current.add(r)}},{key:"draw_curve",value:function(e,r){var t=new THREE.Vector3(0,0,0);r&&(t.y=r.offset||0);for(var n=0;n<e.length-1;n++)this.draw_line(e[n].clone().add(t),e[n+1].clone().add(t))}}]),a}(),E=new s;module.exports=E;
},{"/components/AxisHelper":"xAef","/shaders/basic_color/basic_color_vert":"QfnR","/shaders/basic_color/basic_color_frag":"LSxb","/SceneManager":"qvMM","/Graphics":"xMH9","/primitives/Cube":"wyL4","/primitives/Sphere":"sPjl"}],"WHWR":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var _=0;_<e.length;_++){var a=e[_];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _(t,_,a){return _&&e(t.prototype,_),a&&e(t,a),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=function(){function e(_,a){t(this,e),this.geometry=_,this.material=void 0,this.uniforms={},this.batch_width=a,this.data_textures=[],this.object_names=void 0,this.zero_offset=new THREE.Vector2,this.write_offset=new THREE.Vector2,this.uniform_dirty_count=0,this.tmp_uploaded_data_count=0}return _(e,[{key:"init",value:function(t,e,_){this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:e,fragmentShader:_}),this.object_names=t}},{key:"add_global_uniform",value:function(t,e){this.uniforms[t]={value:e},this.material.needsUpdate=!0}},{key:"set_global_uniform",value:function(t,e){this.uniforms[t].value=e}},{key:"add_object_uniform_v3",value:function(t,e){var _=this.__create_rgb_texture(this.batch_width),a=this.__create_rgb_texture(this.batch_width),r=this.__create_rgb_texture(1),i=this.__add_data_texture(t,_,a,r);e&&this.__flood_data_texture_rgb(i,e)}},{key:"add_object_uniform_v4",value:function(t,e){var _=this.__create_rgba_texture(this.batch_width),a=this.__create_rgba_texture(this.batch_width),r=this.__create_rgba_texture(1),i=this.__add_data_texture(t,_,a,r);e&&this.__flood_data_texture_rgba(i,e)}},{key:"add_object_uniform_v4_float",value:function(t,e){var _=this.__create_rgba_float_texture(this.batch_width),a=this.__create_rgba_float_texture(this.batch_width),r=this.__create_rgba_float_texture(1),i=this.__add_data_texture(t,_,a,r);e&&this.__flood_data_texture_rgba(i,e)}},{key:"set_object_uniform_v3",value:function(t,e,_,a,r,i){var s=this.__get_object_index(t),u=this.__get_data_texture(e);this.__set_pixel_rgb(u.src,s,_,a,r,i),this.__set_pixel_rgb(u.one_pixel,0,_,a,r,i),u.last_accessed_index=s,u.dirty_count++}},{key:"set_object_uniform_v4",value:function(t,e,_,a,r,i,s){var u=this.__get_object_index(t),n=this.__get_data_texture(e);this.__set_pixel_rgba(n.src,u,_,a,r,i,s),this.__set_pixel_rgba(n.one_pixel,0,_,a,r,i,s),n.last_accessed_index=u,n.dirty_count++}},{key:"upload_texture_data",value:function(t,e){for(var _=0;_<this.data_textures.length;_++)e>0&&this.data_textures[_].dirty_count>0&&(1===this.data_textures[_].dirty_count&&this.__partial_texture_data_upload(t,this.data_textures[_]),this.data_textures[_].dirty_count>1&&this.__full_texture_data_upload(t,this.data_textures[_]),this.data_textures[_].dirty_count=0,e--)}},{key:"get_uniform_dirty_count",value:function(){this.uniform_dirty_count=0;for(var t=0;t<this.data_textures.length;t++)this.data_textures[t].dirty_count>0&&this.uniform_dirty_count++;return this.uniform_dirty_count}},{key:"__full_texture_data_upload",value:function(t,e){e.dst.needsUpdate=!0,t.copyTextureToTexture(this.zero_offset,e.src,e.dst)}},{key:"__partial_texture_data_upload",value:function(t,e){var _=e.last_accessed_index;-1!==_&&(this.write_offset.y=Math.floor(_/this.batch_width),this.write_offset.x=_-this.batch_width*this.write_offset.y,t.copyTextureToTexture(this.write_offset,e.one_pixel,e.dst))}},{key:"get_mesh",value:function(){return new THREE.Mesh(this.geometry,this.material)}},{key:"__set_pixel_rgb",value:function(t,e,_,a,r,i){a&&(t.image.data[3*e+0]=_.x),r&&(t.image.data[3*e+1]=_.y),i&&(t.image.data[3*e+2]=_.z)}},{key:"__set_pixel_rgba",value:function(t,e,_,a,r,i,s){a&&(t.image.data[4*e+0]=_.x),r&&(t.image.data[4*e+1]=_.y),i&&(t.image.data[4*e+2]=_.z),s&&(t.image.data[4*e+3]=_.w)}},{key:"__flood_data_texture_rgb",value:function(t,e){for(var _=0;_<this.batch_width*this.batch_width;_++)this.__set_pixel_rgb(t.src,_,e,!0,!0,!0),t.dirty_count++}},{key:"__flood_data_texture_rgba",value:function(t,e){for(var _=0;_<this.batch_width*this.batch_width;_++)this.__set_pixel_rgba(t.src,_,e,!0,!0,!0,!0),t.dirty_count++}},{key:"__create_rgb_texture",value:function(t){var e=new Uint8Array(3*t*t);return new THREE.DataTexture(e,t,t,THREE.RGBFormat)}},{key:"__create_rgba_texture",value:function(t){var e=new Uint8Array(4*t*t);return new THREE.DataTexture(e,t,t,THREE.RGBAFormat)}},{key:"__create_rgba_float_texture",value:function(t){var e=new Float32Array(4*t*t);return new THREE.DataTexture(e,t,t,THREE.RGBA,THREE.FloatType)}},{key:"__get_data_texture",value:function(t){for(var e=0;e<this.data_textures.length;e++)if(this.data_textures[e].name===t)return this.data_textures[e];conosle.error("Data texture "+t+" does not exist")}},{key:"__get_object_index",value:function(t){for(var e=0;e<this.object_names.length;e++)if(this.object_names[e]===t)return e;console.error("the name "+t+" is not contained in this batch")}},{key:"__add_data_texture",value:function(t,e,_,a){return _.needsUpdate=!0,this.data_textures.push({name:t,src:e,dst:_,one_pixel:a,last_accessed_index:-1,dirty_count:0}),this.uniforms[t]={value:_},this.data_textures[this.data_textures.length-1]}},{key:"dispose",value:function(){for(var t=0;t<this.data_textures.length;t++)this.data_textures[t].src.dispose(),this.data_textures[t].dst.dispose(),this.data_textures[t].one_pixel.dispose()}}]),e}();exports.default=a;
},{}],"VduU":[function(require,module,exports) {
"use strict";var t=e(require("/static_batcher/GeometryBatch"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}var u=function(){function e(){r(this,e),this.batches=[]}return n(e,[{key:"batch",value:function(e){var r=[],a=THREE.Math.ceilPowerOfTwo(Math.sqrt(e.length));this.__init_uv_array(r,a);for(var n=0,u=0;u<e.length;u++)for(var o=e[u].getAttribute("position").count,i=Math.floor(u/a),s=u-a*i,c=0;c<o;c++)r[n]=s/a+.5/a,r[n+1]=i/a+.5/a,n+=2;var f=new THREE.BufferAttribute(new Float32Array(r),2),h=THREE.BufferGeometryUtils.mergeBufferGeometries(e);return h.addAttribute("attr_accessor_uv",f),this.batches.push(new t.default(h,a)),this.batches[this.batches.length-1]}},{key:"upload_texture_data",value:function(t){for(var e=0;e<this.batches.length;e++)this.batches[e].upload_texture_data(t,1)}},{key:"__init_uv_array",value:function(t,e){for(var r=0;r<e*e*2;r++)t.push(0)}}]),e}(),o=new u;module.exports=o;
},{"/static_batcher/GeometryBatch":"WHWR"}],"v0GF":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=function(){function n(){e(this,n)}return t(n,[{key:"start",value:function(){}},{key:"end",value:function(){}},{key:"update",value:function(){}},{key:"on_post_render",value:function(){}},{key:"on_pre_render",value:function(){}}]),n}();exports.default=r;
},{}],"QYq1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("/Time")),t=u(require("/Input")),r=u(require("/UI")),i=u(require("/Debug")),a=u(require("/static_batcher/GeometryBatcher")),n=u(require("/BaseApplication"));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var d=function(){function a(e,t){s(this,a),e=e||new n.default,this._frame_id=-1,this.target_application=e,this.renderer=t,this.is_running=!0}return l(a,[{key:"update",value:function(){this.is_running&&(e.default.__update(),i.default.clear(),this.target_application.update(),this.target_application.on_pre_render(),this.renderer.update(),r.default.update(),r.default.render(this.renderer),this.target_application.on_post_render(),i.default.rt_debug&&this.renderer.blit(i.default.rt_debug),t.default.clear(),r.default.clear(),this._frame_id=requestAnimationFrame(this.update.bind(this)))}},{key:"start",value:function(){this.target_application.start(),this.update(),this.is_running=!0}},{key:"stop",value:function(){this.is_running=!1,this.target_application.end(),cancelAnimationFrame(this._frame_id)}}]),a}();exports.default=d;
},{"/Time":"wewU","/Input":"k3P6","/UI":"yntx","/Debug":"J9UP","/static_batcher/GeometryBatcher":"VduU","/BaseApplication":"v0GF"}],"Focm":[function(require,module,exports) {
"use strict";var e=d(require("/Graphics")),r=d(require("/RenderLoop")),a=d(require("/Configuration")),u=d(require("/Input")),n=d(require("/CameraManager")),t=d(require("/SceneManager")),i=d(require("/Screen"));function d(e){return e&&e.__esModule?e:{default:e}}module.exports={Configuration:a.default,Input:u.default,Graphics:e.default,RenderLoop:r.default,CameraManager:n.default,SceneManager:t.default,Screen:i.default};
},{"/Graphics":"xMH9","/RenderLoop":"QYq1","/Configuration":"RyjO","/Input":"k3P6","/CameraManager":"XMgG","/SceneManager":"qvMM","/Screen":"JIgx"}]},{},["Focm"], null)
//# sourceMappingURL=/index.js.map