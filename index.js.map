{"version":3,"sources":["utilities/ArrayUtilities.js","BaseApplication.js","shaders/basic_color/basic_color_vert.glsl","shaders/basic_color/basic_color_frag.glsl","materials/BaseShaderMaterial.js","CameraManager.js","Screen.js","Configuration.js","Time.js","KeyboardInput.js","Input.js","primitives/Sphere.js","editor/shaders/object_picker_vert.glsl","editor/shaders/object_picker_frag.glsl","Mesh.js","primitives/Arrow.js","SceneManager.js","utilities/MathUtilities.js","utilities/CameraUtilities.js","Capabilities.js","utilities/EasingFunctions.js","EventManager.js","components/AxisHelper.js","render_mode/BaseRender.js","RenderLayers.js","shaders/box_blur/compose_frag.glsl","shaders/box_blur/box_blur_frag.glsl","shaders/copy/copy_frag.glsl","shaders/copy/copy_vert.glsl","render_mode/OutlineRender.js","UI.js","materials/BlitMaterial.js","shaders/clear/clear_depth_normal_frag.glsl","materials/ClearDepthNormalMaterial.js","shaders/depth_normals/depth_normals_vert.glsl","shaders/depth_normals/depth_normals_frag.glsl","materials/DepthNormalMaterial.js","render_utilities/DepthAndNormalsRenderer.js","render_utilities/Blitter.js","Graphics.js","primitives/Cube.js","Debug.js","render_mode/NormalRender.js","utilities/ObjectUtilities.js","PerspectiveCamera.js","static_batcher/GeometryBatch.js","static_batcher/GeometryBatcher.js","RenderLoop.js","resource_loader/AbstractLoader.js","resource_loader/TextureLoader.js","resource_loader/GLTFLoader.js","resource_loader/DAELoader.js","resource_loader/TextLoader.js","resource_loader/CubemapLoader.js","resource_loader/AudioLoader.js","resource_loader/JSONLoader.js","resource_loader/OBJLoader.js","ResourceContainer.js","resource_loader/ResourceBatch.js","utilities/TimeUtilities.js","utilities/Validation.js","shaders/grid/grid_frag.glsl","shaders/grid/grid_vert.glsl","utilities/GeometryUtilities.js","components/Grid.js","Components.js","index.js"],"names":["ArrayUtilities","source","target","push","apply","array","size","items_left_count","length","i","clone","elem","index","indexOf","splice","BaseApplication","module","exports","BaseShaderMaterial","vert","frag","uniforms","vertexShader","basic_vert","fragmentShader","basic_frag","_Color","value","THREE","Color","ShaderMaterial","CameraManager","_current","undefined","camera","camera_manager","Screen","width","height","width_height","Vector2","screen_materials","native_width","native_height","pixel_size","x","y","_ScreenSize","vector2","multiplyScalar","window","devicePixelRatio","innerWidth","innerHeight","mat","Configuration","parameters","dpr","is_mobile","is_ios","is_ipad","vertex_image_unit_supported","min_zoom_distance","max_zoom_distance","max_zoom_distance_scale","zoom_speed","use_fxaa","use_ssaa","background_color","touch_sensitivity","zoom_sensitivity","spin_sensitivity","three_finger_rotation_speed","three_finger_allowed_x_rotation_offset","three_finger_allowed_y_rotation_offset","use_touch_gestures","texture_float_supported","use_ortographic","hover_enabled","rotation_enabled","transparency_amount","show_debug_sphere_on_floor_selection","show_debug_sphere_on_steps_in_floor","display_cleanup_log","navigation_speed_damping","navigation_speed","out_of_bounds_force","mouse_zoom_speed","touch_zoom_speed","json","configuration","Time","___time","Clock","__delta_time","__elapsed_time","__allocated_time","getDelta","getElapsedTime","delta_time","elapsed_time","time","KeyboardInput","ctrlz_pressed","ctrlz_fired","keys","document","onkeydown","on_key_down","bind","onkeyup","on_key_up","onkeypress","on_key_press","e","keyCode","ctrlKey","key","press_key","release_keys","pressed","fired","down","key_name","up","keyboard_input","Input","mouse_pos","last_mouse_pos","mouse_dir","__clicked_time","is_mouse_down","is_mouse_up","rotation_angle","_normalized_mouse_pos","left_mouse_button_down","left_mouse_button_pressed","left_mouse_button_released","middle_mouse_button_down","right_mouse_button_down","right_mouse_button_pressed","right_mouse_button_released","mousewheel","previous_scale","previous_rotation","previous_rotation_dirty","mouse_str","tmp_mouse_velocity","bounding_client","multitouch_active","tapped","initial_zoom_distance","zoom_center","zoom_started","touch_zoom","multi_touch_dir","wheel_delta","mac","pinching_with_trackpad","scrolling_with_trackpad","scrolling_with_mouse","double_click","canvas","previous_pos_x","previous_pos_y","rect","getBoundingClientRect","left","top","container","region","ZingTouch","Region","init","scope","set_mouse_pos","addEventListener","on_double_click","on_focus_lost","on_mouse_up","on_mouse_move","on_touch_move","on_touch_end","one_finger_pan","Pan","numInputs","register","event","detail","data","two_fingers_pan","set","change","three_fingers_pan","touch_zoom_delta","distance","last_zoom_distance","center","gesture","Gesture","end","inputs","state","element","on_gesture_end","start","on_mouse_down","on_mouse_wheel","preventDefault","clientX","clientY","ev","events","get_os","is_mac","console","log","deltaY","is_int","Math","abs","current","originalEvent","which","changedTouches","middle_mouse_button_released","rotation_delta","normalize","userAgent","navigator","platform","macosPlatforms","windowsPlatforms","iosPlatforms","os","test","n","clear","normalized_mouse_pos","INPUT","Sphere","radius","color","geometry","SphereBufferGeometry","material","MeshBasicMaterial","Mesh","_selectable_material","__get_selectable_material","original_material","stored_layers","layers","mask","Arrow","dir","cone_height","cylinder_height","cylinder_geo","CylinderBufferGeometry","translate","cone_geometry","ConeBufferGeometry","buffer_geometry","BufferGeometryUtils","mergeBufferGeometries","rotateX","quaternion","setFromUnitVectors","Vector3","scale","z","SceneManager","Scene","name","scene","scene_manager","MathUtilities","from_range_start_value","from_range_end_value","to_range_start_value","to_range_end_value","min","max","rgb","r","round","toString","g","b","points","plane","projected_point","points_on_plane","projectPoint","from","to","t","elements","lerp","x1","x2","CameraUtilities","tmp_mat","Matrix4","tmp_vec","tmp_vec2","Plane","ray","Ray","tmp_size","tmp_unproj","applyQuaternion","NDC","v_fov","fov","PI","h_fov","atan","tan","aspect","distV","far","distH","plane_position","plane_normal","setFromNormalAndCoplanarPoint","get_forward_dir","isPerspectiveCamera","position","unproject_mouse_position","unproject","intersectPlane","zoom_scale","points_sphere","setFromPoints","world_space_center","camera_forward","project_points_on_plane","projected_points_center","box","Box3","getCenter","right","cross","inverse_mat","getInverse","applyMatrix4","getSize","projected_center","zoom","get_zoom_to_fit_rect","bb","isOrthographicCamera","obj_x","obj_y","object_aspect","aspect_ratio","object","getWorldPosition","project","bottom","updateProjectionMatrix","camera_utilities","Capabilities","max_anisotropy","vertex_texture_sampler_available","fp_textures_available","capabilities","EasingFunctions","sin","pow","sqrt","EventManager","queue","zoom_changed_evt","store_clickd_evt","point_selected_evt","config_changed","path_substep_completed","path_completed","go_to_store_requested_evt","resource_loaded_evt","service_clicked_evt","unit_pos_updated_evt","floor_changed_evt","on_enter_floor_navigation","on_exit_floor_navigation","on_enter_floor_selection","on_exit_floor_selection","on_enter_outside_navigation","on_exit_outside_navigation","step_selected_evt","payload","callback","fire","store_id","hit_data","step_number","step_index","resource","service","unit_data","floor_id","event_manager","AxisHelper","blueAxisMat","LineBasicMaterial","depthFunc","AlwaysDepth","blueAxisGeo","Geometry","vertices","blueAxisLine","Line","renderOrder","greenAxisMat","greenAxisGeo","greenAxisLine","redAxisMat","linewidth","redAxisGeo","redAxisLine","computeLineDistances","add","Object3D","BaseRender","context","renderer","RenderLayers","OutlineRender","webgl","main_rt","WebGLRenderTarget","rt1","rt2","compose_material","__get_compose_material","copy_material","__get_copy_material","box_blur_material","__get_box_blur_material","background_material","__get_background_material","copy_plane","PlaneGeometry","frustumCulled","copy_scene","w","h","setSize","_Screen","updateMatrix","updateMatrixWorld","enable","opaque","transparent","disable","outline","_renderer","setClearColor","clear_color","clearTarget","overrideMaterial","render","_MainTex","texture","_SampleDir","_Blur","copy_vert","copy_frag","depthTest","depthWrite","box_blur_frag","compose_frag","extensions","derivatives","Vector4","background_frag","autoClear","UI","ui_elements","_tmp_normalized_pos","autoUpdate","mesh","remove","copy","update","render_ui","current_clicked_element","resize","ui","BlitMaterial","frag_shader","vert_shader","defines","_Resolution","blending","NoBlending","ClearDepthNormalMaterial","clear_depth","clear_normal","_DepthNormal","DepthNormalMaterial","_FarPlane","DepthAndNormalsRenderer","RT","clear_depth_normal_mat","depth_normal_material","graphics","__resize_RT_if_necessary","blit_clear_with_material","far_plane","Blitter","_blit_scene","_blit_material","_blit_quad","PlaneBufferGeometry","_blit_camera","OrthographicCamera","src","dst","setRenderTarget","dst_RT","Graphics","blitter","no_render","current_render_mode","generateDepthNormalTexture","depth_and_normals_renderer","WebGLRenderer","antialias","preserveDrawingBuffer","alpha","setPixelRatio","get","domElement","getMaxAnisotropy","maxVertexTextures","floatVertexTextures","new_state","constructor","on_exit","on_enter","override_mat","__apply_override_material","buffer","readRenderTargetPixels","clear_stencil","clear_alpha","offsetWidth","offsetHeight","update_size","update_native_size","src_RT","blit_with_material","blit","blob_callback","ctx","old_width","old_height","new_width","new_height","tile_width","tile_height","divisions_x","parseInt","ceil","divisions_y","ctx_2D","setViewOffset","drawImage","toBlob","clearViewOffset","blob","link","createElement","download","href","URL","createObjectURL","click","onclick","requestAnimationFrame","revokeObjectURL","a","removeAttribute","render_target","Cube","segments","BoxGeometry","Debug","Vector3_one","Vector3_zero","canvas_renderer","rt_debug","axis","position_2d","fillStyle","fillRect","clearRect","strokeStyle","beginPath","moveTo","lineTo","closePath","stroke","geo","line","pos","cube","depth","distanceTo","sub","forward_dir","forward","basic_color_vert","basic_color_frag","setFromCenterAndSize","helper","Box3Helper","sphere","SphereGeometry","side","DoubleSide","sphere1","curve","options","offset","draw_line","DEBUG","NormalRender","ObjectUtilities","xml","obj","nodeType","attributes","j","attribute","item","nodeName","nodeValue","hasChildNodes","childNodes","xml_to_json","old","PerspectiveCamera","near","GeometryBatch","batch_width","data_textures","object_names","zero_offset","write_offset","uniform_dirty_count","tmp_uploaded_data_count","needsUpdate","uniform_name","default_value_v3","src_tex","__create_rgb_texture","dst_tex","one_pixel_tex","new_data_tex","__add_data_texture","__flood_data_texture_rgb","default_value_v4","__create_rgba_texture","__flood_data_texture_rgba","__create_rgba_float_texture","object_name","vector3","use_r","use_g","use_b","obj_index","__get_object_index","data_texture","__get_data_texture","__set_pixel_rgb","one_pixel","last_accessed_index","dirty_count","vector4","use_a","__set_pixel_rgba","upload_budget","__partial_texture_data_upload","__full_texture_data_upload","texture_data","copyTextureToTexture","floor","image","v3","v4","Uint8Array","DataTexture","RGBFormat","RGBAFormat","Float32Array","RGBA","FloatType","conosle","error","src_texture","dst_texture","one_pixel_text","dispose","GeometryBatcher","batches","buffer_geometries","attr_accessor_uvs","texture_width","ceilPowerOfTwo","__init_uv_array","uv_index","vertex_count","getAttribute","count","buffer_attribute","BufferAttribute","setAttribute","upload_texture_data","uvs","geometry_batcher","RenderLoop","target_application","_frame_id","is_running","frames_passed","__update","post_start","on_pre_render","on_post_render","cancelAnimationFrame","AbstractLoader","resource_id","url","progress","has_finished","has_error","error_message","message","resource_container","TextureLoader","loader","load","set_resource","__update_progress","__loading_ended","__set_error","GLTFLoader","gltf","xhr","loaded","total","msg","DAELoader","ColladaLoader","TextLoader","FileLoader","CubemapLoader","CubeTextureLoader","urls","AudioLoader","listener","loop","volume","voluem","sound","Audio","audio","setBuffer","setLoop","setVolume","get_resource","JSONLoader","username","password","headers","btoa","fetch","then","__parse_to_json","__set_resource","response","OBJLoader","ResourceContainer","resources","fire_resource_loaded","ResourceBatch","batch_name","resource_loaders","print_error","finished","TimeUtilities","start_date","end_date","startDate","moment","parseZone","endDate","duration","diff","days","asDays","days_array","date","endOf","startOf","duration_in_seconds","asSeconds","absolute_start_date","absolute_end_date","Validation","Number","str","JSON","parse","GeometryUtilities","geometry_buffer","indices","positions","bar_coordinates","getX","getY","getZ","BufferGeometry","add_barycentric_attribute","non_indexed_geometry_buffer","Grid","grid_vert","grid_frag","plane_geometry","non_indexed_geometry","convert_to_non_indexed_geometry","rotation","Components"],"mappings":"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","file":"index.js","sourceRoot":"src","sourcesContent":["export default class ArrayUtilities\n{\n\tconstructor(){}\n\n\n  static merge_from_to(source, target)\n  {\n    target.push.apply( target, source );\n  }\n\n  static expand_vec3_array(array, size)\n  {\n    let items_left_count = size - array.length;\n\n\t\tfor (let i = 0;i < items_left_count;i++)\n    {\n      array.push(array[i].clone());\n    }\n  }\n\n  static remove_elem(array, elem)\n  {\n    let index = array.indexOf(elem);\n    if (index > -1) {\n      array.splice(index, 1);\n    }\n  }\n\n}\n\n","export default class BaseApplication\n{\n\tstart() {}\n\tpost_start() {}\n\tend() {}\n\tupdate() {}\n\ton_post_render() {}\n\ton_pre_render() {}\n\tresources_fully_loaded() {}\n}\n","module.exports=\"#define GLSLIFY 1\\nvarying vec2 vUv;\\n\\nvoid main()\\n{\\n  vec3 pos = position;\\n  mat4 MVP = projectionMatrix * modelViewMatrix;\\n\\n  gl_Position = MVP * vec4( pos, 1.0 );\\n  vUv = uv;\\n}\";","module.exports=\"#define GLSLIFY 1\\nuniform vec3 _Color;\\n\\nvoid main()\\n{\\n    gl_FragColor = vec4(_Color, 1.0);\\n}\";","import basic_vert from '/shaders/basic_color/basic_color_vert';\nimport basic_frag from '/shaders/basic_color/basic_color_frag';\n\nexport default class BaseShaderMaterial extends THREE.ShaderMaterial\n{\n\tconstructor(vert, frag, uniforms)\n\t{\n\n\t\tsuper({\n\t\t\tvertexShader: vert \t\t|| basic_vert,\n\t\t\tfragmentShader: frag \t|| basic_frag,\n\t\t\tuniforms: uniforms \t\t|| {\n\t\t\t\t_Color: {value: new THREE.Color(\"#FF0000\")}\n\t\t\t}\n\t\t});\n\t}\n\n}\n\n\n","class CameraManager {\n\tconstructor()\n\t{\n\t\tthis._current = undefined;\n\t}\n\n\tset current(camera)\n\t{\n\t\tthis._current = camera;\n\t}\n\n\tget current()\n\t{\n\t\treturn this._current;\n\t}\n}\n\nconst camera_manager = new CameraManager();\nmodule.exports = camera_manager;\n","class Screen {\n\tconstructor()\n\t{\n\t\tthis.width = 1;\n\t\tthis.height = 1;\n\t\tthis.width_height = new THREE.Vector2(this.width, this.height);\n\n\t\tthis.screen_materials = [];\n\n\t\tthis.native_width = this.width;\n\t\tthis.native_height = this.height;\n\n\t\tthis.pixel_size = new THREE.Vector2(1/this.width, 1/this.height);\n\t}\n\n\tupdate_size(width, height)\n\t{\n\t\tthis.width = width;\n\t\tthis.height = height;\n\n\t\tthis.pixel_size = new THREE.Vector2(1/this.width, 1/this.height) ;\n\n\t\tthis.width_height.x = width  ;\n\t\tthis.width_height.y = height ;\n\n\t\tlet i = this.screen_materials.length;\n\t\twhile(i--)\n\t\t{\n\t\t\tthis.screen_materials[i].uniforms._ScreenSize.value = this.width_height;\n\t\t}\n\t}\n\n\tapply_pixel_density_v2(vector2)\n\t{\n\t\tvector2.multiplyScalar(1/window.devicePixelRatio);\n\n\t\treturn vector2;\n\t}\n\tapply_pixel_density(value)\n\t{\n\t\treturn value * (1/window.devicePixelRatio);\n\t}\n\tupdate_native_size()\n\t{\n\t\tthis.native_width = window.innerWidth;\n\t\tthis.native_height = window.innerHeight;\n\t}\n\n\tadd_screen_material(mat)\n\t{\n\t\tthis.screen_materials.push(mat);\n\t\tmat.uniforms._ScreenSize.value = this.width_height;\n\t}\n\tremove_screen_material(mat)\n\t{\n    let index = this.screen_materials.indexOf(mat);\n    if (index > -1) {\n      this.screen_materials.splice(index, 1);\n    }\n\t}\n\n\tget_pixel_size()\n\t{\n\t\treturn this.pixel_size;\n\t}\n\n\tget aspect_ratio()\n\t{\n\t\treturn this.width/this.height;\n\t}\n\n\n}\n\nexport default new Screen();\n","/*\n\n  A configuration class used as a singleton\n\n*/\n\nclass Configuration {\n  constructor(parameters = {}) {\n\n    this.dpr = window.devicePixelRatio ? window.devicePixelRatio : 1;\n    this.is_mobile = false;\n    this.is_ios = false;\n    this.is_ipad = false;\n\n    this.vertex_image_unit_supported = true;\n\n    this.min_zoom_distance = 3000;\n\n    this.max_zoom_distance = 40000;\n    this.max_zoom_distance_scale = 1.1;\n    this.zoom_speed = 0.1;\n\n\n\n    this.use_fxaa = false;\n    this.use_ssaa = true;\n\n\n\n    this.background_color = new THREE.Color(0.768,0.768,0.768);\n\n\n\n\n    //TOUCH\n    this.touch_sensitivity = 1.5;\n    this.zoom_sensitivity = 0.7;\n    this.spin_sensitivity = 2;\n    this.three_finger_rotation_speed = 3;\n    this.three_finger_allowed_x_rotation_offset = 30;\n    this.three_finger_allowed_y_rotation_offset = 20;\n\n\n    this.use_touch_gestures = false;\n\n\n    this.texture_float_supported = false;\n\n    this.use_ortographic = true;\n\n    this.hover_enabled = false;\n    this.rotation_enabled = false;\n\n    this.transparency_amount = 0.2;\n\n    this.show_debug_sphere_on_floor_selection = false;\n    this.show_debug_sphere_on_steps_in_floor = false;\n    this.display_cleanup_log = false;\n\n\n    this.navigation_speed_damping = 0.74;\n    this.navigation_speed = 200;\n    this.out_of_bounds_force = 1.5;\n    this.mouse_zoom_speed = 0.05;\n    this.touch_zoom_speed = 0.5;\n\n\n  }\n\n\n\n\n\n\n  from_json(json)\n  {\n\n\n  }\n}\n\nconst configuration = new Configuration();\nmodule.exports = configuration;\n","class Time\n{\n\tconstructor()\n\t{\n\t\tthis.___time = new THREE.Clock();\n\t\tthis.__delta_time = 0;\n\t\tthis.__elapsed_time = 0;\n\t\tthis.__allocated_time = new THREE.Vector2(0,0);\n\t}\n\n\n\tget delta_time()\n\t{\n\t\treturn this.__delta_time < 0.4? this.__delta_time : 0.016;\n\t}\n\tget elapsed_time()\n\t{\n\t\treturn this.__elapsed_time;\n\t}\n\tget shader_time()\n\t{\n\t\tthis.__allocated_time.x = this.delta_time;\n\t\tthis.__allocated_time.y = this.elapsed_time;\n\t\treturn  this.__allocated_time;\n\t}\n\n\t__update()\n\t{\n\t\tthis.__delta_time = this.___time.getDelta();\n\t\tthis.__elapsed_time = this.___time.getElapsedTime();\n\t}\n}\n\nconst time = new Time();\nmodule.exports = time;\n\n","export class KeyboardInput\n{\n\tconstructor()\n\t{\n\t\tthis.ctrlz_pressed = false;\n\t\tthis.ctrlz_fired = false;\n\n\t\tthis.keys = [];\n\t}\n\n\tinit()\n\t{\n\t\tdocument.onkeydown \t= this.on_key_down.bind(this);\n\t\tdocument.onkeyup \t\t= this.on_key_up.bind(this);\n\t\tdocument.onkeypress = this.on_key_press.bind(this);\n\t}\n\n\ton_key_down(e)\n\t{\n\t\tif(e.keyCode == 90 && e.ctrlKey && !this.ctrlz_fired)\n    {\n    \tthis.ctrlz_pressed = true;\n    \tthis.ctrlz_fired = true;\n    } \n    if(e.key)\n    {\n    \tthis.press_key(e.key);\n    }\n\t}\n\ton_key_press(e)\n\t{\n\t\t\n\t}\n\ton_key_up(e)\n\t{\n\t\tthis.release_keys();\n\t}\n\n\tclear()\n\t{\n\t\tthis.ctrlz_pressed = false;\n\t\tfor(let i=0; i< this.keys.length; i++)\n\t\t{\n\t\t\tthis.keys[i].pressed = false;\n\t\t}\n\t}\n\n\trelease_keys()\n\t{\n\t\tthis.ctrlz_fired = false;\n\t\t\n\t\tfor(let i=0; i< this.keys.length; i++)\n\t\t{\n\t\t\tthis.keys[i].fired = false;\n\t\t\tthis.keys[i].down = false;\n\t\t}\n\t}\n\n\tpress_key(key)\n\t{\n\t\tfor(let i=0; i< this.keys.length; i++)\n\t\t{\n\t\t\tif(this.keys[i].key_name === key && !this.keys[i].fired)\n\t\t\t{\n\t\t\t\tthis.keys[i].pressed = true;\n\t\t\t\tthis.keys[i].down = true;\n\t\t\t\tthis.keys[i].fired = true;\n\t\t\t}\n\t\t}\n\t}\n\tkey_is_pressed(key)\n\t{\n\t\tfor(let i=0; i< this.keys.length; i++)\n\t\t{\n\t\t\tif(this.keys[i].key_name === key)\n\t\t\t{\n\t\t\t\treturn this.keys[i].pressed;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tkey_is_down(key)\n\t{\n\t\tfor(let i=0; i< this.keys.length; i++)\n\t\t{\n\t\t\tif(this.keys[i].key_name === key)\n\t\t\t{\n\t\t\t\treturn this.keys[i].down;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tregister_key(key)\n\t{\n\t\tthis.keys.push(\n\t\t{\n\t\t\tkey_name: key,\n\t\t\tpressed: false,\n\t\t\tdown: false,\n\t\t\tup: false,\n\t\t\tfired: false\n\n\t\t});\n\t}\n\tunregister_key(key_name)\n\t{\n\t\tlet key = undefined;\n\t\tfor(let i=0; i< this.keys.length; i++)\n\t\t{\n\t\t\tif(this.keys[i].key_name === key_name)\n\t\t\t\tkey = this.keys[i];\n\t\t}\n\n\t\tlet index = this.keys.indexOf(key);\n    if (index > -1) {\n      this.keys.splice(index, 1);\n    }\n\t}\n\n}\n\nconst keyboard_input = new KeyboardInput();\nmodule.exports = keyboard_input;","import Screen from '/Screen';\nimport Configuration from '/Configuration';\nimport Time from '/Time';\nimport KeyboardInput from '/KeyboardInput';\n\nclass Input {\n\tconstructor() {\n\t\tthis.mouse_pos = new THREE.Vector2();\n\t\tthis.last_mouse_pos = new THREE.Vector2();\n\t\tthis.mouse_dir = new THREE.Vector2();\n\n\n\t\tthis.__clicked_time = 0;\n\t\tthis.__elapsed_time = 0;\n\t\tthis.__delta_time = 0;\n\n\t\tthis.is_mouse_down = false;\n\t\tthis.is_mouse_up = false;\n\n\t\tthis.rotation_angle = 0;\n\n\t\tthis._normalized_mouse_pos = new THREE.Vector2(0, 0);\n\n\t\tthis.left_mouse_button_down = false;\n\t\tthis.left_mouse_button_pressed = false;\n\t\tthis.left_mouse_button_released = false;\n\t\tthis.middle_mouse_button_down = false;\n\t\tthis.right_mouse_button_down = false;\n\t\tthis.right_mouse_button_pressed = false;\n\t\tthis.right_mouse_button_released = false;\n\n\t\tthis.mousewheel = 0;\n\n\t\tthis.previous_scale = 0;\n\t\tthis.previous_rotation = 0;\n\t\tthis.previous_rotation_dirty = true;\n\n\t\tthis.mouse_str = \"mouse\";\n\n\t\tthis.tmp_mouse_velocity = new THREE.Vector2();\n\t\tthis.bounding_client = new THREE.Vector2();\n\n\t\tthis.multitouch_active = false;\n\n\t\tthis.tapped = false;\n\t\tthis.initial_zoom_distance = 100;\n\t\tthis.zoom_center = new THREE.Vector2();\n\t\tthis.zoom_started = false;\n\t\tthis.touch_zoom = 1;\n\n\t\tthis.multi_touch_dir = new THREE.Vector2();\n\t\tthis.wheel_delta = 0;\n\n\t\tthis.mac = 'mac';\n\t\tthis.pinching_with_trackpad = false;\n\t\tthis.scrolling_with_trackpad = false;\n\t\tthis.scrolling_with_mouse = false;\n\n\t\tthis.double_click = false;\n\n\t\tthis.canvas = undefined;\n\n\t\t// Input 2.0\n\t\tthis.previous_pos_x = 0;\n\t\tthis.previous_pos_y = 0;\n\t}\n\n\tmouse_is_within_bounds(rect) {\n\t\trect = rect || this.canvas.getBoundingClientRect();\n\n\t\treturn this.mouse_pos.x > rect.left &&\n\t\t\tthis.mouse_pos.x < rect.left + rect.width &&\n\t\t\tthis.mouse_pos.y > rect.top &&\n\t\t\tthis.mouse_pos.y < rect.top + rect.height;\n\t}\n\n\tinit(container, canvas) {\n\t\tthis.canvas = canvas;\n\n\t\tlet region = new ZingTouch.Region(container, false, false);\n\t\tKeyboardInput.init();\n\n\t\tlet scope = this;\n\n\t\tregion.bind(container, 'tap', function (e) {\n\t\t\tscope.tapped = true;\n\t\t\tscope.set_mouse_pos(e);\n\n\t\t});\n\n\t\twindow.addEventListener('dblclick', this.on_double_click.bind(this));\n\n\t\tcontainer.addEventListener('mouseleave', this.on_focus_lost.bind(this));\n\n\t\tcontainer.addEventListener('mouseup', this.on_mouse_up.bind(this));\n\t\tcontainer.addEventListener('mousemove', this.on_mouse_move.bind(this));\n\n\t\tcontainer.addEventListener('touchmove', this.on_touch_move.bind(this), false);\n\t\tcontainer.addEventListener('touchend', this.on_touch_end.bind(this), false);\n\n\t\t// region.bind(container, 'pan', function(e){\n\t\t// \tscope.on_mouse_move(e);\n\t\t// \tconsole.log(\"PAN\");\n\t\t// });\n\t\tlet one_finger_pan = new ZingTouch.Pan({ numInputs: 1 });\n\t\tregion.register(\"one_finger_pan\", one_finger_pan);\n\t\tregion.bind(container, \"one_finger_pan\", (event) => {\n\t\t\tif (event.detail.data.length > 0) {\n\t\t\t\t// scope.multi_touch_dir.set(event.detail.data[0].change.x, event.detail.data[0].change.y)\n\t\t\t\t// scope.multi_touch_dir.multiplyScalar(scope.__delta_time);\n\t\t\t\t// scope.on_mouse_move_zingtouch(event);\n\t\t\t}\n\n\t\t})\n\t\tlet two_fingers_pan = new ZingTouch.Pan({ numInputs: 2 });\n\t\tregion.register(\"two_fingers_pan\", two_fingers_pan);\n\t\tregion.bind(container, \"two_fingers_pan\", (event) => {\n\t\t\tif (event.detail.data.length > 0) {\n\n\t\t\t\t// scope.multi_touch_dir.set(event.detail.data[0].change.x, event.detail.data[0].change.y)\n\t\t\t\t// scope.multi_touch_dir.multiplyScalar(scope.__delta_time);\n\t\t\t\tscope.multi_touch_dir.set(event.detail.data[0].change.x, event.detail.data[0].change.y)\n\t\t\t\tscope.multi_touch_dir.multiplyScalar(scope.__delta_time);\n\t\t\t}\n\t\t})\n\n\t\tlet three_fingers_pan = new ZingTouch.Pan({ numInputs: 3 });\n\t\tregion.register(\"three_fingers_pan\", three_fingers_pan);\n\t\tregion.bind(container, \"three_fingers_pan\", (event) => {\n\t\t\tif (event.detail.data.length > 0) {\n\t\t\t\tscope.multi_touch_dir.set(event.detail.data[0].change.x, event.detail.data[0].change.y)\n\t\t\t\tscope.multi_touch_dir.multiplyScalar(scope.__delta_time);\n\t\t\t}\n\n\t\t})\n\n\t\tregion.bind(container, 'distance', function (e) {\n\n\t\t\tif (!scope.zoom_started) {\n\t\t\t\tscope.zoom_started = true;\n\t\t\t\tscope.touch_zoom_delta = 0;\n\t\t\t\tscope.initial_zoom_distance = e.detail.distance;\n\t\t\t\tscope.last_zoom_distance = e.detail.distance;\n\n\t\t\t\tscope.zoom_center.set(e.detail.center.x, e.detail.center.y);\n\t\t\t\tscope.mouse_pos.set(e.detail.center.x, e.detail.center.y);\n\t\t\t}\n\t\t\tscope.touch_zoom_delta = e.detail.distance - scope.last_zoom_distance;\n\t\t\tscope.last_zoom_distance = e.detail.distance;\n\t\t\tscope.touch_zoom = 1;\n\t\t}, false);\n\n\t\tlet gesture = new ZingTouch.Gesture();\n\t\tgesture.end = (inputs, state, element) => { scope.on_gesture_end(inputs) }\n\t\tgesture.start = (inputs, state, element) => { scope.on_mouse_down(inputs) }\n\t\tregion.register('shortTap', gesture);\n\n\t\tregion.bind(container, 'shortTap', function (e) {\n\t\t});\n\n\t\twindow.addEventListener('wheel', this.on_mouse_wheel.bind(this))\n    container.addEventListener( 'contextmenu', (event)=>{event.preventDefault()}, false );\n\n\t\tcontainer.addEventListener(\"mousemove\", (event) => {\n\t\t\tthis.mouse_pos.x = event.clientX;\n\t\t\tthis.mouse_pos.y = event.clientY;\n\t\t\tthis.scrolling_with_mouse = false;\n\t\t\tthis.scrolling_with_trackpad = false;\n\t\t\tthis.pinching_with_trackpad = false;\n\t\t});\n\t}\n\n\tset_mouse_pos(ev) {\n\t\tthis.mouse_pos.x = ev.detail.events[0].clientX;\n\t\tthis.mouse_pos.y = ev.detail.events[0].clientY;\n\t}\n\n\tget normalized_mouse_pos() {\n\t\tthis._normalized_mouse_pos.x = (this.mouse_pos.x / Screen.width) * 2.0 - 1;\n\t\tthis._normalized_mouse_pos.y = -1 * ((this.mouse_pos.y / Screen.height) * 2.0 - 1);\n\t\treturn this._normalized_mouse_pos;\n\t}\n\n\tget NDC() {\n\t\treturn this.normalized_mouse_pos;\n\t}\n\n\tis_mac() {\n\t\treturn this.get_os() === this.mac;\n\t}\n\n\ton_double_click(event) {\n\t\tthis.double_click = true;\n\t}\n\n\ton_mouse_wheel(event) {\n\n\n\t\tthis.mouse_pos.x = event.clientX;\n\t\tthis.mouse_pos.y = event.clientY;\n\n\t\t// User is using a mac\n\t\tif (this.is_mac()) {\n\t\t\t// User is pinching\n\t\t\tif (event.ctrlKey) {\n\t\t\t\t// Negative values means pinch in.\n\t\t\t\t// Positive values means pinch out.\n\t\t\t\tconsole.log(\"Pinching with a touchpad\", event.deltaY)\n\t\t\t\tthis.pinching_with_trackpad = true;\n\t\t\t\tthis.scrolling_with_trackpad = false;\n\t\t\t\tthis.scrolling_with_mouse = false;\n\t\t\t\t// User is scrolling\n\t\t\t} else {\n\t\t\t\t// User is using the touchpad\n\t\t\t\tif (this.is_int(event.deltaY)) {\n\t\t\t\t\t// Negative values means scroll up\n\t\t\t\t\t// Positive values means scroll down\n\t\t\t\t\t// console.log(\"Scrolling with a touchpad\", (event.deltaY))\n\t\t\t\t\t// 350 is aprox the maximum value of deltaY on touchpad scroll\n\t\t\t\t\tthis.pinching_with_trackpad = false;\n\t\t\t\t\tthis.scrolling_with_trackpad = true;\n\t\t\t\t\tthis.scrolling_with_mouse = false;\n\n\t\t\t\t\tthis.wheel_delta = 1 - (event.deltaY / 350) * 2.0 - 1;\n\t\t\t\t} else {\n\t\t\t\t\t// Negative values means scroll up\n\t\t\t\t\t// Positive values means scroll down\n\t\t\t\t\t// console.log(\"Scrolling with a mouse\", event.deltaY)\n\t\t\t\t\tthis.pinching_with_trackpad = false;\n\t\t\t\t\tthis.scrolling_with_trackpad = false;\n\t\t\t\t\tthis.scrolling_with_mouse = true;\n\n\t\t\t\t\tthis.wheel_delta = event.deltaY / Math.abs(event.deltaY);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t//probably windows\n\t\t\tthis.pinching_with_trackpad = false;\n\t\t\tthis.scrolling_with_trackpad = false;\n\t\t\tthis.scrolling_with_mouse = true;\n\n\t\t\tif (Math.abs(event.deltaY) < 0.0001)\n\t\t\t\tthis.wheel_delta = 0;\n\t\t\telse\n\t\t\t\tthis.wheel_delta = event.deltaY / Math.abs(event.deltaY);\n\n\t\t}\n\t}\n\n\ton_mouse_down(inputs) {\n\t\tthis.mouse_pos.x = inputs[0].current.clientX;\n\t\tthis.mouse_pos.y = inputs[0].current.clientY;\n\n\t\tthis.multitouch_active = inputs.length > 1;\n\n\t\tthis.mouse_dir.x = 0;\n\t\tthis.mouse_dir.y = 0;\n\n\n\t\tthis.__clicked_time = this.__elapsed_time;\n\t\tthis.is_mouse_down = true;\n\t\tthis.is_mouse_up = false;\n\n\t\tswitch (inputs[0].current.originalEvent.which) {\n\t\t\tcase 1:\n\t\t\t\tthis.left_mouse_button_down = true;\n\t\t\t\tthis.left_mouse_button_pressed = true;\n\t\t\t\tbreak;\n\t\t\tcase 2: this.middle_mouse_button_down = true; break;\n\t\t\tcase 3:\n\t\t\t\tthis.right_mouse_button_down = true;\n\t\t\t\tthis.right_mouse_button_pressed = true;\n\t\t\t\tbreak;\n\t\t\tdefault: this.left_mouse_button_down = true; this.left_mouse_button_pressed = true; break;\n\t\t}\n\n\n\t\tthis.wheel_delta = 0;\n\t\tthis.previous_scale = 0;\n\t\tthis.previous_rotation = 0;\n\n\n\t}\n\n\tmouse_clicked() {\n\t\treturn this.tapped;\n\t}\n\n\ton_touch_move(e) {\n\t\tthis.on_mouse_move({ clientX: e.changedTouches[0].clientX, clientY: e.changedTouches[0].clientY})\n\t}\n\n\ton_touch_end(e) {\n\t\tthis.on_gesture_end([{ current: { originalEvent: e } }])\n\t}\n\n\ton_mouse_up(e) {\n\t\tthis.on_gesture_end([ { current: { originalEvent: e } } ])\n\t}\n\n\ton_gesture_end(inputs) {\n\t\tthis.multitouch_active = inputs ? (inputs.length > 1) : false;\n\t\tthis.is_mouse_up = true;\n\t\tthis.zoom_started = false;\n\t\tthis.touch_zoom = 1;\n\t\tthis.mouse_dir.x = 0;\n\t\tthis.mouse_dir.y = 0;\n\t\tthis.previous_scale = 0;\n\t\tthis.previous_rotation = 0;\n\t\tthis.wheel_delta = 0;\n\n\t\tthis.left_mouse_button_down = false;\n\t\tthis.middle_mouse_button_down = false;\n\t\tthis.right_mouse_button_down = false;\n\n\t\tif (inputs) {\n\t\t\tswitch (inputs[0].current.originalEvent.which) {\n\t\t\t\tcase 1:\n\t\t\t\t\tthis.left_mouse_button_released = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tthis.middle_mouse_button_released = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tthis.right_mouse_button_released = true;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.left_mouse_button_released = true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis.is_mouse_down = false;\n\t\tthis.previous_rotation_dirty = true;\n\t\tthis.rotation_delta = 0;\n\t}\n\n\n\ton_focus_lost() {\n\t\tthis.on_gesture_end();\n\t\tthis.left_mouse_button_released = true;\n\t\tthis.middle_mouse_button_released = true;\n\t\tthis.right_mouse_button_released = true;\n\t\tthis.left_mouse_button_released = true;\n\n\t}\n\n\ttime_since_last_mouse_down() {\n\t\treturn this.__elapsed_time - this.__clicked_time;\n\t}\n\n\ton_mouse_move(event) {\n\t\tthis.mouse_pos.x = event.clientX;\n\t\tthis.mouse_pos.y = event.clientY;\n\n\t\tthis.mouse_dir.set(this.mouse_pos.x - this.previous_pos_x,\n\t\t\t\t\t\t\t\t\t\t\t this.mouse_pos.x - this.previous_pos_y);\n\n\t\tthis.mouse_dir.normalize();\n\n\t\tthis.previous_pos_x = this.mouse_pos.x;\n\t\tthis.previous_pos_y = this.mouse_pos.x;\n\t}\n\n\ton_mouse_move_zingtouch(event) {\n\t\tif (event.detail.data.length > 0) {\n\t\t\tthis.set_mouse_pos(event);\n\t\t\tthis.mouse_dir.set(event.detail.data[0].change.x, event.detail.data[0].change.y)\n\t\t\t// this.mouse_dir.x *=  Screen.height / Screen.width;\n\n\t\t\t// this.mouse_dir.multiplyScalar(this.__delta_time/window.devicePixelRatio);\n\t\t}\n\t}\n\n\tget_os() {\n\t\tvar userAgent = window.navigator.userAgent,\n\t\t\tplatform = window.navigator.platform,\n\t\t\tmacosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'],\n\t\t\twindowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'],\n\t\t\tiosPlatforms = ['iPhone', 'iPad', 'iPod'],\n\t\t\tos = null;\n\n\t\tif (macosPlatforms.indexOf(platform) !== -1) {\n\t\t\tos = 'mac';\n\t\t} else if (iosPlatforms.indexOf(platform) !== -1) {\n\t\t\tos = 'ios';\n\t\t} else if (windowsPlatforms.indexOf(platform) !== -1) {\n\t\t\tos = 'windows';\n\t\t} else if (/Android/.test(userAgent)) {\n\t\t\tos = 'android';\n\t\t} else if (!os && /Linux/.test(platform)) {\n\t\t\tos = 'linux';\n\t\t}\n\n\t\treturn os;\n\t}\n\n\tis_int(n) {\n\t\treturn n % 1 === 0;\n\t}\n\n\tclear() {\n\n\t\tthis.__elapsed_time = Time.elapsed_time;\n\t\tthis.__delta_time = Time.delta_time;\n\t\tthis.is_mouse_up = false;\n\t\tthis.wheel_delta = 0;\n\t\tthis.rotation_delta = 0;\n\n\t\tthis.double_click = false;\n\n\n\t\tthis.tapped = false;\n\t\tthis.mouse_dir.multiplyScalar(0);\n\t\tthis.multi_touch_dir.multiplyScalar(0);\n\t\tthis.left_mouse_button_pressed = false;\n\t\tthis.left_mouse_button_released = false;\n\n\t\tthis.right_mouse_button_pressed = false;\n\t\tthis.right_mouse_button_released = false;\n\t\tKeyboardInput.clear();\n\n\t}\n\n}\n\nconst INPUT = new Input();\nmodule.exports = INPUT;\n","export default class Sphere extends THREE.Mesh\n{\n\tconstructor(radius, color)\n\t{\n    color = color || \"#FF0000\";\n    radius = radius || 1;\n    let geometry = new THREE.SphereBufferGeometry( radius, 64, 64);\n    let material = new THREE.MeshBasicMaterial( {color: color} );\n\t\tsuper(geometry, material);\n\t}\n}","module.exports=\"#define GLSLIFY 1\\nvoid main()\\n{\\n  vec3 pos = position;\\n  mat4 MVP = projectionMatrix * modelViewMatrix;\\n\\n  gl_Position = MVP * vec4( pos, 1.0 );\\n  //gl_Position.zw -= 0.1;\\n}\";","module.exports=\"#define GLSLIFY 1\\nuniform vec3 _Color;\\n\\nvoid main()\\n{\\n    gl_FragColor = vec4(_Color, 1.0);\\n}\";","import vert from '/editor/shaders/object_picker_vert';\nimport frag from '/editor/shaders/object_picker_frag';\nexport default class Mesh extends THREE.Mesh\n{\n\tconstructor(geometry, material)\n\t{\n\t\tsuper(geometry, material);\n\n\t\tthis._selectable_material = this.__get_selectable_material();\n\t\tthis.original_material = this.material;\n\t\tthis.stored_layers = this.layers.mask;\n\t}\n\n\t__get_selectable_material()\n\t{\n\t\treturn new THREE.ShaderMaterial({\n\t\t\tuniforms: {\n\t\t\t\t_Color: {value: new THREE.Color()}\n\t\t\t},\n\t\t\tvertexShader: vert,\n      fragmentShader: frag\n\t\t});\n\t}\n\n\trestore_material()\n\t{\n\t\tthis.material = this.original_material;\n\t}\n\n\tstore_layer_state()\n\t{\n\t\tthis.stored_layers = this.layers.mask;\n\t}\n\trestore_layer_state()\n\t{\n\t\tthis.layers.mask = this.stored_layers;\n\t}\n\n\tget selectable_material()\n\t{\n\t\treturn this._selectable_material;\n\t}\n}\n","import Mesh from '/Mesh';\n\nexport default class Arrow extends Mesh\n{\n\tconstructor(color, length, dir)\n\t{\n\t\tcolor = color || \"#FF0000\";\n\t\tlength = length || 1;\n\n\t\tlet cone_height = 0.4;\n\t\tlet cylinder_height = length - cone_height;\n\t\tlet cylinder_geo = new THREE.CylinderBufferGeometry( 0.01, 0.01, cylinder_height, 32 );\n\t\tcylinder_geo.translate(0,cylinder_height/2,0);\n\t\tlet cone_geometry = new THREE.ConeBufferGeometry( 0.1, cone_height, 32 );\n\t\tcone_geometry.translate(0, cylinder_height+cone_height/2, 0);\n\t  let buffer_geometry = THREE.BufferGeometryUtils.mergeBufferGeometries([cylinder_geo, cone_geometry]);\n\t  buffer_geometry.rotateX(3.14/2);\n    let material = new THREE.MeshBasicMaterial( {color: color} );\n\t\tsuper(buffer_geometry, material);\n\n\t\tif(dir)\n\t\t\tthis.quaternion.setFromUnitVectors(new THREE.Vector3(0,0,1), dir);\n\t}\n\n\tset dir(dir)\n\t{\n\t\tthis.quaternion.setFromUnitVectors(new THREE.Vector3(0,0,1), dir);\n\t}\n\tset length(value)\n\t{\n\t\tthis.scale.z = value;\n\t}\n}\n","class SceneManager\n{\n\tconstructor()\n\t{\n\t\tthis._current = new THREE.Scene();\n\t\tthis._current.name = \"default_scene\";\n\n\t}\n\n\tadd_scene(name)\n\t{\n\n\t}\n\n\tget current()\n\t{\n\t\treturn this._current;\n\t}\n\n\tset current(scene)\n\t{\n\t\tthis._current = scene;\n\t}\n}\n\nconst scene_manager = new SceneManager();\nmodule.exports = scene_manager;","export default class MathUtilities\n{\n\tconstructor(){}\n\n\tstatic linear_map(value,\n             from_range_start_value,\n             from_range_end_value,\n             to_range_start_value,\n             to_range_end_value)\n  {\n      return ((value - from_range_start_value)/ (from_range_end_value - from_range_start_value)) * (to_range_end_value - to_range_start_value) + to_range_start_value;\n  }\n\n  static between(value, min, max)\n  {\n\t\treturn (value >= min && value <= max)\n\n  }\n\n  static rgb_to_hex(rgb) {\n    rgb.r = Math.round(rgb.r * 255).toString(16);\n    rgb.g = Math.round(rgb.g * 255).toString(16);\n    rgb.b = Math.round(rgb.b * 255).toString(16);\n\n    if (rgb.r.length == 1)\n      rgb.r = \"0\" + rgb.r;\n    if (rgb.g.length == 1)\n      rgb.g = \"0\" + rgb.g;\n    if (rgb.b.length == 1)\n      rgb.b = \"0\" + rgb.b;\n\n    return \"#\" + rgb.r + rgb.g + rgb.b;\n  }\n\n  static project_points_on_plane(points, plane)\n  {\n    let projected_point = new THREE.Vector3();\n    let points_on_plane = [];\n    for(let i=0; i< points.length; i++)\n    {\n      plane.projectPoint(points[i], projected_point);\n      points_on_plane.push(projected_point.clone());\n    }\n\n    return points_on_plane;\n  }\n\n  static matrix4_lerp(from,to,target, t)\n  {\n    for(let i=0; i< 16; i++)\n    {\n      target.elements[i] = THREE.Math.lerp(from.elements[i], to.elements[i], t);\n    }\n  }\n\n  static equals(x1, x2) {\n    return Math.abs(x1 - x2) < 0.000001\n  }\n}\n","import CameraManager from '/CameraManager';\nimport Input from '/Input';\nimport Sphere from '/primitives/Sphere';\nimport Arrow from '/primitives/Arrow';\nimport SceneManager from '/SceneManager';\nimport MathUtilities from '/utilities/MathUtilities';\nimport Screen from '/Screen';\n\nclass CameraUtilities\n{\n\tconstructor()\n\t{\n\t\tthis.tmp_mat = new THREE.Matrix4();\n\t\tthis.tmp_vec = new THREE.Vector3(0,0,1);\n\t\tthis.tmp_vec2 = new THREE.Vector3(0,0,0);\n\t\tthis.plane = new THREE.Plane();\n\t\tthis.ray = new THREE.Ray();\n\n    this.tmp_size = new THREE.Vector3();\n    this.tmp_unproj = new THREE.Vector3();\n\t}\n\n  get_up_dir(camera) {\n    camera = camera || CameraManager.current;\n    this.tmp_vec.set(0, 1, 0);\n    this.tmp_vec.applyQuaternion(camera.quaternion);\n\n    return this.tmp_vec;\n  }\n\tget_forward_dir(camera)\n\t{\n    camera = camera || CameraManager.current;\n\t\tthis.tmp_vec.set(0,0,1);\n\t\tthis.tmp_vec.applyQuaternion(camera.quaternion);\n\n\t\treturn this.tmp_vec;\n\n\t}\n\tget_right_dir(camera)\n\t{\n    camera = camera || CameraManager.current;\n\t\tthis.tmp_vec.set(1,0,0);\n  \t\tthis.tmp_vec.applyQuaternion(camera.quaternion);\n  \t\treturn this.tmp_vec;\n\n\t}\n\n\tunproject_mouse_position(NDC, camera)\n  {\n    camera = camera || CameraManager.current;\n    let v_fov = (camera.fov/2) * Math.PI/180;\n    let h_fov = (2 * Math.atan(Math.tan(v_fov) * camera.aspect))/2;\n\n\n    let distV = Math.tan(v_fov) * camera.far;\n    let distH = Math.tan(h_fov) * camera.far;\n\n    this.tmp_vec.set(distH * NDC.x , distV * NDC.y, -camera.far).normalize();\n\n    return this.tmp_vec.applyQuaternion(camera.quaternion);\n  }\n\n  get_plane_intersection(plane_position, plane_normal, NDC, camera)\n  {\n    camera = camera || CameraManager.current;\n    NDC = NDC || Input.normalized_mouse_pos;\n\n\t\tthis.plane.setFromNormalAndCoplanarPoint(plane_normal || this.get_forward_dir(camera), plane_position);\n    if(camera.isPerspectiveCamera)\n    {\n      this.ray.set(camera.position, this.unproject_mouse_position(NDC, camera));\n    }\n    else\n    {\n      this.tmp_unproj.set(NDC.x, NDC.y, 1).unproject(camera);\n      this.ray.set(camera.position, this.tmp_unproj);\n    }\n\n    this.ray.intersectPlane(this.plane, this.tmp_vec2);\n    return this.tmp_vec2;\n  }\n\n\n\n\n  fit_points_on_camera(points, zoom_scale = 1)\n  {\n    let points_sphere = new THREE.Sphere().setFromPoints(points);\n    let world_space_center = points_sphere.center;\n    let camera_forward = this.get_forward_dir(CameraManager.current).clone();\n\n    let plane = new THREE.Plane().setFromNormalAndCoplanarPoint(camera_forward, world_space_center);\n\n\n\n    let points_on_plane = MathUtilities.project_points_on_plane(points, plane)\n\n    let projected_points_center = new THREE.Vector3();\n    let box =  new THREE.Box3().setFromPoints(points_on_plane);\n    box.getCenter(projected_points_center);\n\n\n    let up = new THREE.Vector3(0,1,0).applyQuaternion(CameraManager.current.quaternion)\n    let right = up.clone().cross(camera_forward).normalize();\n    let mat = new THREE.Matrix4().set(  right.x, up.x, camera_forward.x, world_space_center.x,\n                                        right.y, up.y, camera_forward.y, world_space_center.y,\n                                        right.z, up.z, camera_forward.z, world_space_center.z,\n                                              0,    0,                0,        1);\n\n    let inverse_mat = new THREE.Matrix4().getInverse(mat);\n    for(let i=0; i< points_on_plane.length; i++)\n    {\n      points_on_plane[i].applyMatrix4(inverse_mat);\n    }\n\n\n    let size = new THREE.Vector3();\n    box =  new THREE.Box3().setFromPoints(points_on_plane);\n    box.getSize(size);\n    size.multiplyScalar(zoom_scale);\n    let projected_center = new THREE.Vector3();\n    box.getCenter(projected_center);\n\n\n    return {\n      position: projected_points_center,\n      zoom: this.get_zoom_to_fit_rect(size.x/2, size.y/2)\n    }\n\n  }\n\n  get_zoom_to_fit_rect(width,height)\n  {\n    let v_fov = (CameraManager.current.fov/2) * Math.PI/180;\n    let h_fov = (2 * Math.atan(Math.tan(v_fov) * CameraManager.current.aspect))/2;\n\n    let distV = height / Math.tan(v_fov);\n    let distH = width / Math.tan(h_fov);\n\n    return Math.max(Math.abs(distH), Math.abs(distV));\n  }\n\n  get_zoom_to_fit_box(bb, camera)\n  {\n    if(camera.isOrthographicCamera)\n    {\n      bb.getSize(this.tmp_size);\n\n      let obj_x = this.tmp_size.x;\n      let obj_y = this.tmp_size.y;\n      let object_aspect = obj_x / obj_y;\n      if(Screen.aspect_ratio / object_aspect > 1)\n      {\n        return Screen.height/obj_y;\n      }\n      else\n      {\n        return Screen.width/obj_x;\n      }\n    }\n    else\n    {\n      // return this.fit_points_on_camera([bb.min, bb.max], 1).zoom;\n      let size = new THREE.Vector3();\n      bb.getSize(size);\n      return this.get_zoom_to_fit_rect(size.x, size.y);\n\n    }\n  }\n\n  get_html_screen_pos(object, camera)\n  {\n    object.getWorldPosition(this.tmp_vec);\n    this.tmp_vec.project(camera);\n\n    this.tmp_vec.x = (this.tmp_vec.x * 0.5 + 0.5) * (Screen.width);\n    this.tmp_vec.y = (1-(this.tmp_vec.y * 0.5 + 0.5)) * Screen.height;\n    return this.tmp_vec;\n  }\n\n  update_projection(camera)\n  {\n    camera.left   = -Screen.width/2;\n    camera.right  = Screen.width/2;\n    camera.top    = Screen.height/2;\n    camera.bottom = -Screen.height/2;\n    camera.aspect = Screen.aspect_ratio;\n    camera.updateProjectionMatrix(true);\n  }\n}\n\nconst camera_utilities = new CameraUtilities();\nmodule.exports = camera_utilities;\n","class Capabilities\n{\n\tconstructor()\n\t{\n\t\tthis.max_anisotropy = 0;\n\t\tthis.vertex_texture_sampler_available = false;\n\t\tthis.fp_textures_available = false;\n\t}\n}\n\nconst capabilities = new Capabilities();\nmodule.exports = capabilities;\n","export default class EasingFunctions\n{\n\tconstructor(){}\n\n\tstatic ease_out_sine(x) {\n\t\treturn Math.sin(x * 3.14 / 2);\n\t}\n\n\tstatic ease_in_out_cubic(x) {\n\t\treturn x < 0.5 ?\n\t\t\t4 * x * x * x :\n\t\t\t1 - Math.pow(-2 * x + 2, 3) / 2;\n\t}\n\n\tstatic ease_out_cubic (x) {\n\t\treturn 1 - Math.pow(1 - x, 3);\n\t}\n\n\tstatic ease_in_out_quint (x) {\n\t\treturn x < 0.5 ?\n\t\t\t16 * x * x * x * x * x :\n\t\t\t1 - Math.pow(-2 * x + 2, 5) / 2;\n\t}\n\n\tstatic ease_out_quint (x) {\n\t\treturn 1 - Math.pow(1 - x, 5);\n\t}\n\n\tstatic ease_in_out_circ (x) {\n\t\treturn x < 0.5 ?\n\t\t\t(1 - Math.sqrt(1 - Math.pow(2 * x, 2))) / 2 :\n\t\t\t(Math.sqrt(1 - Math.pow(-2 * x + 2, 2)) + 1) / 2;\n\t}\n\n\tstatic ease_out_quad (x) {\n\t\treturn 1 - (1 - x) * (1 - x);\n\t}\n\n}","class EventManager\n{\n\n    constructor()\n    {\n        this.queue = {};\n\n        this.zoom_changed_evt           = \"zoom_changed\";\n        this.store_clickd_evt           = \"store_clicked\";\n        this.point_selected_evt         = \"point_selected\";\n        this.config_changed             = \"config_changed\";\n\n        this.path_substep_completed     = \"path_substep_completed\";\n        this.path_completed             = \"path_completed\";\n        this.go_to_store_requested_evt  = \"go_to_store_requested\";\n\n        this.resource_loaded_evt        = \"resource_loaded\";\n        this.service_clicked_evt        = \"service_clicked\";\n        this.unit_pos_updated_evt       = \"unit_position_updated\";\n\n        this.floor_changed_evt          = \"floor_changed\";\n\n        this.on_enter_floor_navigation  = \"on_enter_floor_navigation\";\n        this.on_exit_floor_navigation   = \"on_exit_floor_navigation\";\n\n        this.on_enter_floor_selection   = \"on_enter_floor_selection\";\n        this.on_exit_floor_selection    = \"on_exit_floor_selection\";\n\n        this.on_enter_outside_navigation  = \"on_enter_outside_navigation\";\n        this.on_exit_outside_navigation   = \"on_exit_outside_navigation\";\n\n        this.step_selected_evt = \"step_selected\";\n\n\n        \n    }\n\n    fire(event, payload)\n    {\n        let queue = this.queue[event];\n\n        if (queue === undefined) {\n            return;\n        }\n        let i = queue.length;\n        while (i--) {\n            queue[i](payload);\n        }\n\n    }\n\n    on(event, callback)\n    {\n        if (typeof this.queue[event] === 'undefined') \n        {\n            this.queue[event] = [];\n        }\n\n        this.queue[event].push(callback);\n    }\n\n    fire_zoom_changed(zoom)\n    {\n        this.fire(this.zoom_changed_evt, zoom);\n    }\n    fire_store_selected(store_id)\n    {\n        this.fire(this.store_clickd_evt, store_id);\n    }\n    fire_point_selected(hit_data)\n    {\n        this.fire(this.point_selected_evt, hit_data);\n    }\n    fire_config_changed()\n    {\n        this.fire(this.config_changed);\n    }\n    fire_path_substep_completed(step_number)\n    {\n        this.fire(this.path_substep_completed, step_number);\n    }\n    fire_path_completed()\n    {\n        this.fire(this.path_completed);\n    }\n    fire_step_selected(step_index)\n    {\n        this.fire(this.step_selected_evt, step_index);\n    }\n\n    fire_go_to_store_requested(store_id)\n    {\n        this.fire(this.go_to_store_requested_evt, store_id);\n    }\n\n    fire_resource_loaded(resource)\n    {\n        this.fire(this.resource_loaded_evt, resource);\n    }\n\n    fire_service_clicked(service)\n    {\n        this.fire(this.service_clicked_evt, service);\n    }\n    fire_unit_position_updated(unit_data)\n    {\n        this.fire(this.unit_pos_updated_evt, unit_data);\n    }\n\n    fire_floor_switched(floor_id)\n    {\n        this.fire(this.floor_changed_evt, floor_id);\n    }\n\n    fire_on_enter_floor_navigation(state)\n    {\n        this.fire(this.on_enter_floor_navigation, state);\n    }\n\n    fire_on_exit_floor_navigation(state)\n    {\n        this.fire(this.on_exit_floor_navigation, state);\n    }\n\n    fire_on_enter_floor_selection(state)\n    {\n        this.fire(this.on_enter_floor_selection,state);\n    }\n\n    fire_on_exit_floor_selection(state)\n    {\n        this.fire(this.on_exit_floor_selection,state);\n    }\n    \n    fire_on_enter_outside_navigation(state)\n    {\n        this.fire(this.on_enter_outside_navigation,state);\n    }\n\n    fire_on_exit_outside_navigation(state)\n    {\n        this.fire(this.on_exit_outside_navigation,state);\n    }\n\n\n}\n\nconst event_manager = new EventManager();\nmodule.exports = event_manager;","\nexport default class AxisHelper extends THREE.Object3D {\n  constructor(scale = 1.0) {\n    super();\n\n    const blueAxisMat = new THREE.LineBasicMaterial({ color: 0x4444ff, depthFunc: THREE.AlwaysDepth });\n    const blueAxisGeo = new THREE.Geometry();\n    blueAxisGeo.vertices.push(new THREE.Vector3(0, 0, 0));\n    blueAxisGeo.vertices.push(new THREE.Vector3(0, 0, -1000));\n    const blueAxisLine = new THREE.Line(blueAxisGeo, blueAxisMat);\n    blueAxisLine.renderOrder = 50000;\n\n    const greenAxisMat = new THREE.LineBasicMaterial({ color: 0x44ff44, depthFunc: THREE.AlwaysDepth });\n    const greenAxisGeo = new THREE.Geometry();\n    greenAxisGeo.vertices.push(new THREE.Vector3(0, 0, 0));\n    greenAxisGeo.vertices.push(new THREE.Vector3(0, 1000, 0));\n    const greenAxisLine = new THREE.Line(greenAxisGeo, greenAxisMat);\n    greenAxisLine.renderOrder = 50000;\n\n    const redAxisMat = new THREE.LineBasicMaterial({ linewidth: 100, color: 0xff4444, depthFunc: THREE.AlwaysDepth });\n    const redAxisGeo = new THREE.Geometry();\n    redAxisGeo.vertices.push(new THREE.Vector3(0, 0, 0));\n    redAxisGeo.vertices.push(new THREE.Vector3(1000, 0, 0));\n    const redAxisLine = new THREE.Line(redAxisGeo, redAxisMat);\n    redAxisLine.computeLineDistances();\n    redAxisLine.renderOrder = 50000;\n    this.renderOrder = 100000;\n    this.add(blueAxisLine);\n    this.add(greenAxisLine);\n    this.add(redAxisLine);\n    this.scale.set(scale, scale, scale);\n\n  }\n\n  update() {\n  }\n\n  dispose() {\n\n  }\n}\n","export default class BaseRender\n{\n\tconstructor()\n\t{\n\n\t}\n\n\trender()\n\t{\n\t\t\n\t}\n\n\ton_enter(context, renderer)\n\t{\n\n\t}\n\n\ton_exit(context, renderer)\n\t{\n\t\t\n\t}\n\n\tresize()\n\t{\n\t\t\n\t}\n\n}\n"," \nexport default class RenderLayers {\n  constructor() {\n\n  }\n\n  static get opaque()            { return 0; }\n  static get transparent()       { return 1; }\n  static get outline()       \t\t { return 2; }\n  static get selectable()\t\t\t\t { return 3; }\n\n\n}\n\n\n\n","module.exports=\"#define GLSLIFY 1\\nuniform sampler2D _MainTex;\\nuniform sampler2D _Blur;\\nuniform vec2 _Screen;\\nvarying vec2 vUv;\\n\\nfloat aastep(float threshold, float value) {\\n  #ifdef GL_OES_standard_derivatives\\n    float afwidth = length(vec2(dFdx(value), dFdy(value))) * 0.70710678118654757;\\n    return smoothstep(threshold-afwidth, threshold+afwidth, value);\\n  #else\\n    return step(threshold, value);\\n  #endif  \\n}\\n\\nvoid main()\\n{\\n\\tvec2 pixel_size = 1.0/_Screen;\\n\\n\\tvec4 color = texture2D( _MainTex, vUv);\\n\\tfloat mask = 1.0 - color.a;\\n\\n\\tfloat blur = texture2D( _Blur, vUv).a;\\n\\n  // gl_FragColor = vec4(mask,mask,mask,0.0);\\n  // gl_FragColor = color;\\n\\n\\tgl_FragColor = vec4(mix(color.rgb, mix(color.rgb, vec3(1.,0.,0.),aastep(0.076, blur)), mask), 1.0);\\n}\\n\\n\";","module.exports=\"#define GLSLIFY 1\\nuniform sampler2D _MainTex;\\nuniform vec2 _Resolution;\\nuniform vec2 _SampleDir;\\nvarying vec2 vUv;\\n\\nvoid main()\\n{\\n\\n\\tvec3 sum = vec3(0.,0.,0.);\\n\\tvec2 dir = (0.5/_Resolution) * _SampleDir;\\n\\tfloat _Distance = 2.0;\\n\\tsum += texture2D( _MainTex, vUv + dir * -4. * _Distance ).rgb * 0.0525;\\n\\tsum += texture2D( _MainTex, vUv + dir * -3. * _Distance ).rgb * 0.075;\\n\\tsum += texture2D( _MainTex, vUv + dir * -2. * _Distance ).rgb * 0.110;\\n\\tsum += texture2D( _MainTex, vUv + dir * -1. * _Distance ).rgb * 0.150;\\n\\tsum += texture2D( _MainTex, vUv + dir *  0. * _Distance ).rgb * 0.225;\\n\\tsum += texture2D( _MainTex, vUv + dir *  1. * _Distance ).rgb * 0.150;\\n\\tsum += texture2D( _MainTex, vUv + dir *  2. * _Distance ).rgb * 0.110;\\n\\tsum += texture2D( _MainTex, vUv + dir *  3. * _Distance ).rgb * 0.075;\\n\\tsum += texture2D( _MainTex, vUv + dir *  4. * _Distance ).rgb * 0.0525;\\n\\tgl_FragColor = vec4(sum, 1.0);\\n\\n}\\n\";","module.exports=\"#define GLSLIFY 1\\nuniform sampler2D _MainTex;\\n\\nvarying vec2 vUv;\\nvoid main()\\n{\\n\\tgl_FragColor = texture2D(_MainTex, vUv);\\n}\";","module.exports=\"#define GLSLIFY 1\\nvarying vec2 vUv;\\nvoid main()\\n{\\n\\tgl_Position = vec4(uv * 2.0 - 1.0, 1.0, 1.0);\\n\\tvUv = uv;\\n}\";","import Screen from '/Screen';\nimport RenderLayers from '/RenderLayers';\n\nimport compose_frag from '/shaders/box_blur/compose_frag';\nimport box_blur_frag from '/shaders/box_blur/box_blur_frag';\nimport copy_frag from '/shaders/copy/copy_frag';\nimport copy_vert from '/shaders/copy/copy_vert';\nimport background_frag from '/shaders/basic_color/basic_color_frag';\n\nexport default class OutlineRender\n{\n\n\tconstructor(webgl)\n\t{\n\t\tthis.main_rt \t\t\t\t= new THREE.WebGLRenderTarget(Screen.width, Screen.height);\n\t\tthis.rt1\t\t \t\t\t\t= new THREE.WebGLRenderTarget(Screen.width, Screen.height);\n\t\tthis.rt2\t\t \t\t\t\t= new THREE.WebGLRenderTarget(Screen.width, Screen.height);\n\n\n    this.compose_material \t\t= this.__get_compose_material();\n    this.copy_material \t\t\t\t= this.__get_copy_material();\n    this.box_blur_material \t\t= this.__get_box_blur_material();\n    this.background_material \t= this.__get_background_material();\n\n\t\tthis.copy_plane = new THREE.Mesh( new THREE.PlaneGeometry(1,1), this.copy_material );\n\t\tthis.copy_plane.frustumCulled = false;\n\t\tthis.copy_scene = new THREE.Scene();\n\t\tthis.copy_scene.add(this.copy_plane);\n\n\t}\n\n\tresize(w,h)\n\t{\n\t\tthis.main_rt.setSize(w,h);\n\t\tthis.rt1.setSize(w,h);\n\t\tthis.rt2.setSize(w,h);\n\t\tthis.box_blur_material.uniforms._Screen.value.set(w,h);\n\t\tthis.compose_material.uniforms._Screen.value.set(w,h);\n\t}\n\n\n\trender(webgl)\n\t{\n\t\twebgl.camera.updateMatrix();\n\t\twebgl.camera.updateMatrixWorld();\n\n\t\twebgl.camera.layers.enable(RenderLayers.opaque);\n\t\twebgl.camera.layers.enable(RenderLayers.transparent);\n\t\twebgl.camera.layers.disable(RenderLayers.outline);\n\n\t\t//render scene\n\t\twebgl._renderer.setClearColor(webgl.clear_color, 0);\n\t\twebgl._renderer.clearTarget(this.main_rt,true,true,true);\n\n\t\tthis.copy_scene.overrideMaterial = this.background_material;\n\t\tthis.background_material.uniforms._Color.value.set(webgl.clear_color.r, webgl.clear_color.g, webgl.clear_color.b, 0);\n\t\twebgl._renderer.render(this.copy_scene, webgl.camera, this.main_rt, false);\n\n\n\t\twebgl._renderer.render(webgl.scene, webgl.camera, this.main_rt, false);\n\n\n\n\n\t\t//horizontal blur\n\t\tthis.box_blur_material.uniforms._MainTex.value = this.main_rt.texture;\n\t\tthis.box_blur_material.uniforms._SampleDir.value.set(1,0);\n\n\t\tthis.copy_scene.overrideMaterial = this.box_blur_material;\n\t\twebgl._renderer.render(this.copy_scene, webgl.camera, this.rt1, false);\n\n\t\t//vertical blur\n\t\tthis.box_blur_material.uniforms._SampleDir.value.set(0,1);\n\t\tthis.box_blur_material.uniforms._MainTex.value = this.rt1.texture;\n\n\t\twebgl._renderer.render(this.copy_scene, webgl.camera, this.rt2, false);\n\n\n\t\t//compose\n\t\tthis.copy_scene.overrideMaterial = this.compose_material;\n\t\tthis.compose_material.uniforms._MainTex.value = this.main_rt.texture;\n\t\tthis.compose_material.uniforms._Blur.value = this.rt2.texture;\n\t\twebgl._renderer.render(this.copy_scene, webgl.camera, undefined, false);\n\t\tthis.copy_scene.overrideMaterial = undefined;\n\t}\n\n\t__get_copy_material()\n\t{\n\t\treturn new THREE.ShaderMaterial({\n      uniforms: {\n        _MainTex: \t\t\t{value : undefined}\n      },\n      vertexShader: copy_vert,\n      fragmentShader: copy_frag,\n      depthTest: false,\n      depthWrite: false\n    });\n\t}\n\n\t__get_box_blur_material()\n\t{\n \t\treturn new THREE.ShaderMaterial({\n      uniforms: {\n        _MainTex: \t\t\t{value : undefined},\n        _SampleDir: \t\t{value : new THREE.Vector2()},\n        _Screen: \t\t\t\t{value : new THREE.Vector2(Screen.width, Screen.height)}\n      },\n      vertexShader: copy_vert,\n      fragmentShader: box_blur_frag,\n      depthTest: false,\n      depthWrite: false\n    });\n\t}\n\n\t__get_compose_material()\n\t{\n\t\treturn new THREE.ShaderMaterial({\n      uniforms: {\n        _MainTex: \t\t\t{value : undefined},\n        _Blur: \t\t\t\t\t{value : undefined},\n        _Screen: \t\t\t\t{value : new THREE.Vector2(Screen.width, Screen.height)}\n      },\n      vertexShader: copy_vert,\n      fragmentShader: compose_frag,\n      depthTest: false,\n      depthWrite: false,\n      extensions: {\n      \tderivatives: true\n      }\n    });\n\t}\n\n\t__get_background_material()\n\t{\n\t\treturn new THREE.ShaderMaterial({\n      uniforms: {\n        _Color: \t\t\t\t{value : new THREE.Vector4(0,0,0,0)}\n      },\n      vertexShader: copy_vert,\n      fragmentShader: background_frag,\n      depthTest: true,\n      depthWrite: false\n\n    });\n\t}\n\n\ton_enter(webgl)\n\t{\n\t\twebgl._renderer.autoClear = false;\n\t}\n\n\ton_exit(webgl)\n\t{\n\t\twebgl._renderer.autoClear = true;\n\t}\n}\n","import Input from '/Input';\n\nclass UI\n{\n\n    constructor()\n    {\n        this.ui_elements = [];\n        this._tmp_normalized_pos = new THREE.Vector2();\n        this.scene = new THREE.Scene();\n        this.scene.autoUpdate = false;\n        this.scene.frustumCulled = false;\n    }\n\n    add_clickable_element(elem)\n    {\n        this.ui_elements.push(elem);\n        this.scene.add(elem.mesh);\n    }\n    remove_clickable_element(elem)\n    {\n        let index = this.ui_elements.indexOf(elem);\n        if (index > -1) {\n          this.ui_elements.splice(index, 1);\n        }\n\n        this.scene.remove(elem.mesh);\n    }\n\n    update()\n    {\n        this._tmp_normalized_pos.copy(Input.normalized_mouse_pos);\n        for(let i=0; i< this.ui_elements.length; i++)\n        {\n            this.ui_elements[i].update(this._tmp_normalized_pos)\n        }\n    }\n\n    render(renderer)\n    {\n        renderer.render_ui(this.scene);\n    }\n\n    clear()\n    {\n        this.current_clicked_element = undefined\n    }\n\n    resize()\n    {\n        for(let i=0; i< this.ui_elements.length; i++)\n        {\n            this.ui_elements[i].resize()\n        }\n    }\n\n\n\n}\n\nconst ui = new UI();\nmodule.exports = ui;\n","import vert from '/shaders/copy/copy_vert';\nimport frag from '/shaders/copy/copy_frag';\n\nexport default class BlitMaterial extends THREE.ShaderMaterial\n{\n\tconstructor(frag_shader, vert_shader, defines)\n\t{\n\t\tsuper({\n\t\t\tuniforms: {\n\t\t\t\t_MainTex: {value: null},\n        _Resolution:{value: new THREE.Vector2(0,0)}\n\t\t\t},\n\t\t\tdefines: defines || {},\n\t\t\tvertexShader: vert_shader || vert,\n\t\t\tfragmentShader: frag_shader || frag,\n\t\t\tdepthWrite: false,\n      blending: THREE.NoBlending,\n      depthTest: false,\n      depthWrite: false,\n      depthFunc: THREE.AlwaysDepth\n\t\t});\n\t}\n\n}\n","module.exports=\"#define GLSLIFY 1\\nuniform vec4 _DepthNormal;\\nvec2 EncodeFloatRG( float v )\\n{\\n    vec2 kEncodeMul = vec2(1.0, 255.0);\\n    float kEncodeBit = 1.0/255.0;\\n    vec2 enc = kEncodeMul * v;\\n    enc = fract (enc);\\n    enc.x -= enc.y * kEncodeBit;\\n    return enc;\\n}\\n\\nvec2 EncodeNormal (vec3 n)\\n{\\n    float scale = 1.7777;\\n    vec2 enc = n.xy / (n.z+1.0);\\n    enc /= scale;\\n    enc = enc*0.5+0.5;\\n    return enc;\\n}\\n\\nvoid main()\\n{\\n    gl_FragColor = vec4(EncodeFloatRG(_DepthNormal.x), EncodeNormal(normalize(_DepthNormal.yzw)));  \\n}\";","import BlitMaterial from '/materials/BlitMaterial';\nimport frag from '/shaders/clear/clear_depth_normal_frag';\n\nexport default class ClearDepthNormalMaterial extends BlitMaterial\n{\n\tconstructor(clear_depth, clear_normal)\n\t{\n\t\tsuper(frag);\n\t\tthis.uniforms._DepthNormal = {value: new THREE.Vector4(clear_depth, clear_normal.x, clear_normal.y, clear_normal.z)};\n\t}\n\n}\n","module.exports=\"#define GLSLIFY 1\\nvarying vec3 v_normal;\\nvarying vec3 v_pos;\\n\\nvoid main()\\n{\\n  vec3 pos = position;\\n  mat4 MVP = projectionMatrix * modelViewMatrix;\\n\\n  v_normal \\t= (modelViewMatrix * vec4(normal, 0.0)).xyz;\\n  v_pos \\t\\t= (modelViewMatrix * vec4( pos, 1.0 )).xyz;\\n\\n  gl_Position = MVP * vec4( pos, 1.0 );\\n}\";","module.exports=\"#define GLSLIFY 1\\nvarying vec3 v_normal;\\nvarying vec3 v_pos;\\n\\nuniform float _FarPlane;\\n\\nvec2 EncodeFloatRG( float v )\\n{\\n    vec2 kEncodeMul = vec2(1.0, 255.0);\\n    float kEncodeBit = 1.0/255.0;\\n    vec2 enc = kEncodeMul * v;\\n    enc = fract (enc);\\n    enc.x -= enc.y * kEncodeBit;\\n    return enc;\\n}\\n\\nvec2 EncodeNormal (vec3 n)\\n{\\n    float scale = 1.7777;\\n    vec2 enc = n.xy / (n.z+1.0);\\n    enc /= scale;\\n    enc = enc*0.5+0.5;\\n    return enc;\\n}\\n\\nvoid main()\\n{\\n\\tgl_FragColor = vec4(EncodeFloatRG(length(v_pos.z)/_FarPlane), EncodeNormal(normalize(v_normal)));\\t\\n}\\n\\n\";","import vert from '/shaders/depth_normals/depth_normals_vert';\nimport frag from '/shaders/depth_normals/depth_normals_frag';\n\nexport default class DepthNormalMaterial extends THREE.ShaderMaterial\n{\n\tconstructor()\n\t{\n\t\tsuper({\n      uniforms: {\n      \t_FarPlane: {value: 1}\n      },\n      vertexShader: vert,\n      fragmentShader: frag\n    });\n\t}\n\n\tset far_plane(value)\n\t{\n\t\tthis.uniforms._FarPlane.value = value;\n\t}\n\n}\n","import CameraManager from '/CameraManager';\nimport SceneManager from '/SceneManager';\nimport Screen from '/Screen';\n\nimport ClearDepthNormalMaterial from '/materials/ClearDepthNormalMaterial';\nimport DepthNormalMaterial from '/materials/DepthNormalMaterial';\n\nexport default class DepthAndNormalsRenderer\n{\n\tconstructor()\n\t{\n    this.RT = new THREE.WebGLRenderTarget(Screen.width, Screen.height);\n\n    this.clear_depth_normal_mat = new ClearDepthNormalMaterial(1, new THREE.Vector3(0,0,1));\n    this.depth_normal_material = new DepthNormalMaterial();\n\t}\n\n\n\trender(graphics)\n\t{\n\t\tthis.__resize_RT_if_necessary();\n\n\n    graphics.clear(this.RT, undefined, true,true)\n\n    graphics.blit_clear_with_material(this.RT, this.clear_depth_normal_mat);\n\n    this.depth_normal_material.far_plane = CameraManager.current.far;\n\n    graphics.render(undefined, undefined, this.RT, this.depth_normal_material);\n\n\t}\n\n  __resize_RT_if_necessary()\n  {\n    if(this.RT.width !== Screen.width || this.RT.height !== Screen.height)\n    {\n      this.RT.setSize(Screen.width, Screen.height);\n    }\n  }\n\n\tget render_target()\n\t{\n\t\treturn this.RT;\n\t}\n\n}\n","import BlitMaterial from '/materials/BlitMaterial';\n\nexport default class Blitter\n{\n\n  constructor(renderer)\n  {\n      this.renderer = renderer;\n      this._blit_scene = new THREE.Scene();\n      this._blit_material = new BlitMaterial();\n      this._blit_quad = new THREE.Mesh(\n        new THREE.PlaneBufferGeometry( 1, 1 ),this._blit_material );\n      this._blit_scene.add( this._blit_quad );\n      this._blit_camera = new THREE.OrthographicCamera( -1, 1, 1, -1, -10000, 10000 );\n\n  }\n\n\n  blit(src, dst)\n  {\n    this._blit_quad.material = this._blit_material;\n    this._blit_quad.material.uniforms._MainTex.value = src.texture;\n    this._blit_quad.material.uniforms._Resolution.value.set(src.width, src.height);\n\n    this.renderer.setRenderTarget(dst === undefined? null : dst);\n\n    this.renderer.render( this._blit_scene,\n                          this._blit_camera);\n  }\n\n  blit_with_material(src, dst, mat)\n  {\n    this._blit_quad.material = mat;\n    this._blit_quad.material.uniforms._MainTex.value = src.texture;\n    this._blit_quad.material.uniforms._Resolution.value.set(src.width, src.height);\n\n    this.renderer.setRenderTarget(dst === undefined? null : dst);\n\n    this.renderer.render( this._blit_scene,\n                          this._blit_camera );\n  }\n\n  blit_clear_with_material(dst_RT, mat)\n  {\n    this._blit_quad.material = mat;\n\n    this.renderer.setRenderTarget(dst_RT === undefined? null : dst_RT);\n\n    this.renderer.render( this._blit_scene, this._blit_camera);\n  }\n\n}\n","import Configuration from           '/Configuration';\nimport BaseRender from   '/render_mode/BaseRender';\nimport OutlineRender from           '/render_mode/OutlineRender';\nimport Screen from '/Screen';\nimport CameraManager from '/CameraManager';\nimport SceneManager from '/SceneManager';\nimport UI from '/UI';\nimport Capabilities from '/Capabilities';\nimport DepthAndNormalsRenderer from '/render_utilities/DepthAndNormalsRenderer';\nimport Blitter from '/render_utilities/Blitter';\n\nclass Graphics {\n\n\n  constructor() {\n    this._renderer = undefined;\n    this.blitter = undefined;\n    this.canvas = undefined;\n    this.no_render = undefined;\n    this.current_render_mode = undefined;\n    this.generateDepthNormalTexture = false;\n    this.depth_and_normals_renderer = undefined;\n  }\n\n  init(canvas) {\n    this._renderer = new THREE.WebGLRenderer({\n      antialias: true,\n      preserveDrawingBuffer: true,\n      alpha: true,\n      canvas: canvas\n    });\n\n    this._renderer.autoClear = false;\n\n    this._renderer.setPixelRatio(window.devicePixelRatio);\n\n\t\tthis._renderer.extensions.get( 'ANGLE_instanced_arrays' )\n\n    this.blitter = new Blitter(this._renderer);\n\n    this.canvas = this._renderer.domElement;\n\n    this.no_render = new BaseRender();\n\n    this.current_render_mode = this.no_render;\n\n    Capabilities.max_anisotropy = this._renderer.capabilities.getMaxAnisotropy();\n    Capabilities.vertex_texture_sampler_available = this._renderer.capabilities.maxVertexTextures > 0;\n    Capabilities.fp_textures_available = this._renderer.capabilities.floatVertexTextures;\n\n    this.generateDepthNormalTexture = false;\n\n    this.depth_and_normals_renderer = new DepthAndNormalsRenderer();\n\n  }\n\n  get dom_element()\n  {\n    return this._renderer.domElement;\n  }\n\n  get depth_normals_RT()\n  {\n    return this.depth_and_normals_renderer.render_target;\n  }\n\n\n  set_state(new_state)\n  {\n    console.log(\"VIEWAPI - map render mode switch to: \" + new_state.constructor.name);\n\n    this.current_render_mode.on_exit(this, this._renderer);\n    this.current_render_mode = new_state;\n    this.current_render_mode.on_enter(this, this._renderer);\n  }\n\n  update() {\n    if(this.generateDepthNormalTexture)\n    {\n      this.depth_and_normals_renderer.render(this);\n    }\n\n    if(CameraManager.current)\n    {\n      CameraManager.current.aspect = Screen.aspect_ratio;\n\n      CameraManager.current.updateProjectionMatrix();\n\n      CameraManager.current.updateMatrix();\n      CameraManager.current.updateMatrixWorld(true);\n      this.current_render_mode.render();\n    }\n  }\n\n\n\n  render(scene, camera, RT, override_mat)\n  {\n    this.__apply_override_material(scene, override_mat);\n\n    this._renderer.setRenderTarget(RT === undefined? null : RT);\n    this._renderer.render(scene  || SceneManager.current,\n                          camera || CameraManager.current);\n\n    this.__apply_override_material(scene, undefined);\n\n\n  }\n\n  __apply_override_material(scene, mat)\n  {\n    if(scene)\n      scene.overrideMaterial = mat;\n    else\n      SceneManager.current.overrideMaterial = mat;\n  }\n\n  readback_RT(RT, buffer)\n  {\n    this._renderer.readRenderTargetPixels( RT, 0, 0, RT.width, RT.height, buffer);\n  }\n\n  clear(RT, camera, clear_depth, clear_stencil)\n  {\n    this._renderer.setRenderTarget(RT === undefined? null : RT);\n\n    if(camera)\n    {\n      this._renderer.setClearColor(camera.clear_color, camera.clear_alpha);\n    }\n\n    this._renderer.clear( camera?         true : false, // clear color\n                          clear_depth?    true : false,\n                          clear_stencil?  true : false);\n  }\n\n  render_ui(scene)\n  {\n    this._renderer.render(scene, CameraManager.current)\n  }\n\n\n\n  on_resize() {\n\n    let width  = this.canvas.offsetWidth;\n    let height = this.canvas.offsetHeight;\n    Screen.update_size(width, height);\n    Screen.update_native_size()\n\n    this._renderer.setSize(width,height, false);\n\n    UI.resize();\n    this.current_render_mode.resize(width,height);\n\n  }\n\n\n  blit(src_RT, dst_RT, mat)\n  {\n    if(mat)\n      this.blitter.blit_with_material(src_RT, dst_RT, mat);\n    else\n      this.blitter.blit(src_RT, dst_RT);\n  }\n\n  blit_clear_with_material(dst_RT, mat)\n  {\n    this.blitter.blit_clear_with_material(dst_RT, mat);\n  }\n\n\n  take_screenshot(blob_callback)\n  {\n\n    const ctx = this;\n\n\n    let old_width = Screen.width;\n    let old_height = Screen.height;\n\n    let new_width = 4096;\n    let new_height = 4096;\n\n    let tile_width = 1024;\n    let tile_height = 1024;\n\n    let divisions_x = parseInt(Math.ceil(new_width / tile_width));\n    let divisions_y = parseInt(Math.ceil(new_height / tile_height));\n\n    Screen.update_size(tile_width, tile_height);\n\n    this._renderer.setPixelRatio(1);\n\n    this._renderer.setSize(tile_width ,tile_height, false);\n\n    this.ctx_2D.canvas.width  = new_width;\n    this.ctx_2D.canvas.height = new_height;\n\n    CameraManager.current.aspect = Screen.aspect_ratio;\n    CameraManager.current.updateMatrix();\n    CameraManager.current.updateMatrixWorld(true);\n\n    for(let x = 0; x < divisions_x; x++)\n    {\n      for(let y = 0; y < divisions_y; y++)\n      {\n\n        CameraManager.current.setViewOffset( new_width,             new_height,\n                                             Screen.width*x,         Screen.height*y,\n                                             Screen.width,            Screen.height);\n        this.current_render_mode.render();\n\n        this.ctx_2D.drawImage(this._renderer.domElement, Screen.width*x, Screen.height*y);\n      }\n    }\n\n    // transform the result canvas into a blob\n    // from them the callback turns into a ULR and download it\n    this.ctx_2D.canvas.toBlob(blob_callback,\"image/png;base64;\");\n\n    CameraManager.current.clearViewOffset();\n    Screen.update_size(old_width,old_height);\n    this._renderer.setPixelRatio(window.devicePixelRatio);\n    this._renderer.setSize(old_width,old_height, false);\n\n    CameraManager.current.aspect = Screen.aspect_ratio;\n    CameraManager.current.updateMatrix();\n    CameraManager.current.updateMatrixWorld(true);\n\n  }\n\n  download_screenshot (blob) {\n    console.log(\"el blob\", blob);\n    let link = document.createElement('a');\n    link.download = \"Snapshot.png\";\n\n    link.href = URL.createObjectURL(blob);\n    link.click()\n\n    link.onclick = function() {\n      requestAnimationFrame(function() {\n        URL.revokeObjectURL(a.href);\n      });\n      a.removeAttribute('href')\n    };\n\n  }\n\n}\n\nconst graphics = new Graphics();\nmodule.exports = graphics;\n\n","import Mesh from '/Mesh';\n\nexport default class Cube extends Mesh\n{\n\tconstructor(size, segments, color)\n\t{\n\t\tsize \t\t\t= size || new THREE.Vector3(1,1,1);\n\t\tsegments \t= segments || new THREE.Vector3(1,1,1);\n    color \t\t= color || 0xff0000;\n    let geometry = new THREE.BoxGeometry( size.x, size.y, size.z, segments.x, segments.y, segments.z);\n    let material = new THREE.MeshBasicMaterial( {color: color} );\n\t\tsuper(geometry, material);\n\t}\n}\n","import AxisHelper from '/components/AxisHelper';\nimport basic_color_vert from '/shaders/basic_color/basic_color_vert';\nimport basic_color_frag from '/shaders/basic_color/basic_color_frag';\nimport SceneManager from '/SceneManager';\nimport Graphics from '/Graphics';\nimport Cube from '/primitives/Cube';\nimport Sphere from '/primitives/Sphere';\n\nclass Debug {\n  constructor() {\n    this.Vector3_one = new THREE.Vector3(1,1,1);\n    this.Vector3_zero = new THREE.Vector3(0,0,0);\n    this.canvas_renderer = undefined;\n\n    this.rt_debug = undefined;\n  }\n\n  init(webgl)\n  {\n    this.webgl = webgl;\n\n    this.ctx = undefined;\n\n    // var cln = webgl.dom.cloneNode(false);\n    // cln.id = \"canvas_debug\";\n    // $(cln).css(\"position\", \"absolute\");\n    // webgl.dom.parentElement.insertBefore(cln, webgl.dom);\n    // this.ctx = cln.getContext('2d');\n\n    // this.ctx.clearRect(0, 0, cln.width, cln.height);\n    // this.ctx.fillStyle =  \"rgba(255, 0, 0, 1)\";\n\n  }\n\n  draw_axis()\n  {\n    let axis = new AxisHelper();\n    SceneManager.current.add(axis);\n    return axis;\n  }\n\n  set_debug_RT(RT)\n  {\n    this.rt_debug = RT;\n  }\n\n  draw_rectangle(position_2d, width, height, color)\n  {\n    width  = width || 100;\n    height = height || 100;\n    this.ctx.fillStyle =  color || \"rgba(255, 0, 0, 1)\";\n    this.ctx.fillRect(position_2d.x - width/2,\n                      (this.ctx.canvas.height - position_2d.y) - height/2,width,height);\n\n  }\n\n  clear()\n  {\n    if(this.ctx)\n      this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n  }\n\n  draw_line_2D(from, to, color)\n  {\n    this.ctx.strokeStyle =  color ||\"rgba(255, 0, 0, 1)\";\n    this.ctx.beginPath();\n    this.ctx.moveTo(from.x, from.y);\n    this.ctx.lineTo(to.x, to.y);\n    this.ctx.closePath();\n    this.ctx.stroke();\n  }\n\n  draw_line(from, to, color)\n  {\n    color = color || 0xff0000;\n    let mat = new THREE.LineBasicMaterial({ color: color });\n    let geo = new THREE.Geometry();\n    geo.vertices.push(from);\n    geo.vertices.push(to);\n    let line = new THREE.Line(geo, mat);\n    SceneManager.current.add(line);\n    return line;\n  }\n  draw_cube(pos, size, color)\n  {\n    size = size || 1;\n    color = color || 0xff0000;\n    pos = pos || new THREE.Vector3();\n\n    var cube = new Cube(new THREE.Vector3(size, size, size), undefined, color );\n    cube.position.copy(pos);\n    SceneManager.current.add( cube );\n    return cube;\n  }\n  draw_oriented_cube(from, to, height = 1, color = \"#FF0000\", depth = 0.1)\n  {\n  \tlet size = from.distanceTo(to);\n    let cube = new Cube(new THREE.Vector3(depth, height, size), undefined, color );\n\n  \tlet center = to.clone().sub(from).multiplyScalar(0.5);\n\t\tlet forward_dir = center.clone().normalize();\n\t\tcenter.add(from);\n\n\t\tcube.position.copy(center);\n\n\n\t\tlet up = new THREE.Vector3(0,1,0);\n  \tlet forward = forward_dir.clone();\n  \tlet right = forward.clone().cross(up);\n\n  \t// cube.quaternion.setFromRotationMatrix(new THREE.Matrix4().makeBasis(right,up,forward));\n  \tcube.quaternion.setFromUnitVectors(new THREE.Vector3(0,0,-1), forward_dir);\n\n    SceneManager.current.add( cube );\n    return cube;\n  }\n  draw_plane(width, height, color)\n  {\n    var geometry = new THREE.PlaneGeometry( width, height );\n    let material = new THREE.ShaderMaterial({\n      uniforms: {\n        _Color: {value : new THREE.Vector4(0,1,0, 0.2)},\n      },\n      vertexShader: basic_color_vert,\n      fragmentShader: basic_color_frag,\n      transparent: true,\n      depthWrite: false\n    });\n\n    var plane = new THREE.Mesh( geometry, material );\n    plane.renderOrder = -10000\n    SceneManager.current.add(plane);\n    return plane;\n  }\n  draw_empty_cube(pos, size,color)\n  {\n    size = size || 1;\n    color = color || 0xff0000;\n\n    let box = new THREE.Box3().setFromCenterAndSize(new THREE.Vector3(), new THREE.Vector3(size, size, size));\n    let helper = new THREE.Box3Helper( box, color );\n    helper.position.copy(pos || new THREE.Vector3());\n    return helper;\n  }\n  draw_sphere(pos, size, color)\n  {\n    size = size || 1;\n    color = color || 0xff0000;\n    pos = pos || new THREE.Vector3();\n\n    var sphere = new Sphere(size, color );\n    sphere.position.copy(pos);\n    SceneManager.current.add( sphere );\n    return sphere;\n  }\n  draw_sphere_helper(sphere, color)\n  {\n    color = color || 0xff0000;\n    var geometry = new THREE.SphereGeometry( sphere.radius, 32, 32 );\n    var material = new THREE.MeshBasicMaterial( {color: color, side: THREE.DoubleSide} );\n    var sphere = new THREE.Mesh( geometry, material );\n    SceneManager.current.add(sphere);\n  }\n\n  draw_math_sphere(sphere)\n  {\n    var geometry = new THREE.SphereGeometry( sphere.radius, 32, 32 );\n    let material = new THREE.ShaderMaterial({\n      uniforms: {\n        _Color: {value : new THREE.Vector4(1,0,0, 0.2)},\n      },\n      vertexShader: basic_color_vert,\n      fragmentShader: basic_color_frag,\n      transparent: true\n    });\n    // var material = new THREE.MeshBasicMaterial( {color: 0xff0000, transparent = true} );\n    var sphere1 = new THREE.Mesh( geometry, material );\n    sphere1.position.copy(sphere.center);\n    SceneManager.current.add(sphere1)\n  }\n\n  draw_bounding_box(bb)\n  {\n    var helper = new THREE.Box3Helper( bb, 0xffff00 );\n    SceneManager.current.add( helper );\n  }\n\n  draw_curve(curve, options)\n  {\n    let offset = new THREE.Vector3(0,0, 0);\n    if(options)\n      offset.y = options.offset || 0;\n\n    for(let i=0; i< curve.length-1; i++)\n    {\n      this.draw_line(curve[i].clone().add(offset), curve[i+1].clone().add(offset));\n    }\n  }\n\n}\n\nconst DEBUG = new Debug();\nmodule.exports = DEBUG;\n","import CameraManager from '/CameraManager';\nimport SceneManager from '/SceneManager';\nimport Screen from '/Screen';\nimport BaseRender from '/render_mode/BaseRender';\nimport Graphics from '/Graphics';\n\nexport default class NormalRender extends BaseRender\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t}\n\n\n\trender()\n\t{\n\t\tGraphics.clear(undefined, CameraManager.current, true, true);\n\n\t\tGraphics.render(SceneManager.current, CameraManager.current);\n\t}\n\n}\n","export default class ObjectUtilities\r\n{\r\n\tconstructor(){}\r\n\r\n  // Changes XML to JSON\r\n  static xml_to_json(xml) {\r\n\r\n    // Create the return object\r\n    var obj = {};\r\n\r\n    if (xml.nodeType == 1) { // element\r\n      // do attributes\r\n      if (xml.attributes.length > 0) {\r\n        obj[\"@attributes\"] = {};\r\n        for (var j = 0; j < xml.attributes.length; j++) {\r\n          var attribute = xml.attributes.item(j);\r\n          obj[\"@attributes\"][attribute.nodeName] = attribute.nodeValue;\r\n        }\r\n      }\r\n    } else if (xml.nodeType == 3) { // text\r\n      obj = xml.nodeValue;\r\n    }\r\n\r\n    // do children\r\n    if (xml.hasChildNodes()) {\r\n      for (var i = 0; i < xml.childNodes.length; i++) {\r\n        var item = xml.childNodes.item(i);\r\n        var nodeName = item.nodeName;\r\n        if (typeof (obj[nodeName]) == \"undefined\") {\r\n          obj[nodeName] = this.xml_to_json(item);\r\n        } else {\r\n          if (typeof (obj[nodeName].push) == \"undefined\") {\r\n            var old = obj[nodeName];\r\n            obj[nodeName] = [];\r\n            obj[nodeName].push(old);\r\n          }\r\n          obj[nodeName].push(this.xml_to_json(item));\r\n        }\r\n      }\r\n    }\r\n    return obj;\r\n  };\r\n\r\n}\r\n\r\n","export default class PerspectiveCamera extends THREE.PerspectiveCamera\n{\n\tconstructor(fov, aspect, near, far)\n\t{\n\t\tsuper(fov, aspect, near, far);\n\n\t\tthis.clear_color = new THREE.Color(\"#000000\");\n\t\tthis.clear_alpha = 1;\n\t}\n}","export default class GeometryBatch\n{\n\tconstructor(geometry, batch_width)\n\t{\n\t\tthis.geometry = geometry;\n\n\t\tthis.material = undefined;\n\t\tthis.uniforms = {};\n\t\tthis.batch_width = batch_width;\n\n\t\tthis.data_textures = [];\n\n\t\tthis.object_names = undefined;\n\n\n\t\tthis.zero_offset = new THREE.Vector2();\n\t\tthis.write_offset = new THREE.Vector2();\n\n\t\tthis.uniform_dirty_count = 0;\n\n\t\tthis.tmp_uploaded_data_count = 0;\n\n\t}\n\n\tinit(object_names, vert_shader, frag_shader)\n\t{\n\t\tthis.material = new THREE.ShaderMaterial({\n\t\t\tuniforms: this.uniforms,\n\t\t\tvertexShader: vert_shader,\n\t\t\tfragmentShader: frag_shader\n\t\t});\n\t\tthis.object_names = object_names;\n\n\t}\n\n\tadd_global_uniform(name, data)\n\t{\n\t\tthis.uniforms[name] = {value: data};\n\t\tthis.material.needsUpdate = true;\n\t}\n\tset_global_uniform(name, data)\n\t{\n\t\tthis.uniforms[name].value = data;\n\t}\n\n\tadd_object_uniform_v3(uniform_name, default_value_v3)\n\t{\n\t\tlet src_tex \t\t= this.__create_rgb_texture(this.batch_width);\n\t\tlet dst_tex \t\t= this.__create_rgb_texture(this.batch_width);\n\t\tlet one_pixel_tex = this.__create_rgb_texture(1);\n\n\n\t\tlet new_data_tex = this.__add_data_texture(uniform_name, src_tex, dst_tex, one_pixel_tex);\n\n\t\tif(default_value_v3)\n\t\t\tthis.__flood_data_texture_rgb(new_data_tex, default_value_v3);\n\t\n\t}\n\n\tadd_object_uniform_v4(uniform_name, default_value_v4)\n\t{\n\t\tlet src_tex \t\t= this.__create_rgba_texture(this.batch_width);\n\t\tlet dst_tex \t\t= this.__create_rgba_texture(this.batch_width);\n\t\tlet one_pixel_tex = this.__create_rgba_texture(1);\n\n\n\t\tlet new_data_tex = this.__add_data_texture(uniform_name, src_tex, dst_tex, one_pixel_tex);\n\n\t\tif(default_value_v4)\n\t\t\tthis.__flood_data_texture_rgba(new_data_tex, default_value_v4);\n\t\n\t}\n\n\tadd_object_uniform_v4_float(uniform_name, default_value_v4)\n\t{\n\t\tlet src_tex \t\t= this.__create_rgba_float_texture(this.batch_width);\n\t\tlet dst_tex \t\t= this.__create_rgba_float_texture(this.batch_width);\n\t\tlet one_pixel_tex = this.__create_rgba_float_texture(1);\n\n\n\t\tlet new_data_tex = this.__add_data_texture(uniform_name, src_tex, dst_tex, one_pixel_tex);\n\n\t\tif(default_value_v4)\n\t\t\tthis.__flood_data_texture_rgba(new_data_tex, default_value_v4);\n\t\n\t}\n\n\tset_object_uniform_v3(object_name, uniform_name, vector3, use_r, use_g, use_b)\n\t{\n\t\tlet obj_index = this.__get_object_index(object_name);\n\t\tlet data_texture = this.__get_data_texture(uniform_name);\n\n\t\tthis.__set_pixel_rgb(data_texture.src, obj_index, vector3, use_r, use_g, use_b);\n\t\tthis.__set_pixel_rgb(data_texture.one_pixel, 0\t, vector3, use_r, use_g, use_b);\n\n\t\tdata_texture.last_accessed_index = obj_index;\n\n\t\tdata_texture.dirty_count++; \n\t}\n\n\tset_object_uniform_v4(object_name, uniform_name, vector4, use_r, use_g, use_b, use_a)\n\t{\n\t\tlet obj_index = this.__get_object_index(object_name);\n\t\tlet data_texture = this.__get_data_texture(uniform_name);\n\n\t\tthis.__set_pixel_rgba(data_texture.src, obj_index, vector4, use_r, use_g, use_b, use_a);\n\t\tthis.__set_pixel_rgba(data_texture.one_pixel, 0, vector4, use_r, use_g, use_b, use_a);\n\t\tdata_texture.last_accessed_index = obj_index;\n\n\t\tdata_texture.dirty_count++; \n\t}\n\n\n\tupload_texture_data(renderer, upload_budget)\n\t{\n\t\tfor(let i=0; i< this.data_textures.length; i++)\n\t\t{\n\t\t\tif(upload_budget > 0 && this.data_textures[i].dirty_count > 0)\n\t\t\t{\n\t\t\t\tif(this.data_textures[i].dirty_count === 1)\n\t\t\t\t\tthis.__partial_texture_data_upload(renderer, this.data_textures[i]);\n\t\t\t\tif(this.data_textures[i].dirty_count > 1)\n\t\t\t\t\tthis.__full_texture_data_upload(renderer, this.data_textures[i]);\n\n\t\t\t\tthis.data_textures[i].dirty_count = 0;\n\n\t\t\t\tupload_budget--;\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\n\tget_uniform_dirty_count()\n\t{\n\t\tthis.uniform_dirty_count = 0;\n\t\tfor(let i=0; i< this.data_textures.length; i++)\n\t\t{\n\t\t\tif(this.data_textures[i].dirty_count > 0)\n\t\t\t\tthis.uniform_dirty_count++;\n\t\t}\n\t\treturn this.uniform_dirty_count;\n\t}\n\n\n\t__full_texture_data_upload(renderer, texture_data)\n\t{\n\t\t// console.log(\"full texture update of\"+ texture_data.name);\n\t\ttexture_data.dst.needsUpdate = true;\n\t\trenderer.copyTextureToTexture(\n\t\t\t\t\tthis.zero_offset, \n\t\t\t\t\ttexture_data.src, \n\t\t\t\t\ttexture_data.dst\n\t\t\t);\n\t}\n\t__partial_texture_data_upload(renderer, texture_data)\n\t{\n\t\t// console.log(\"partial texture update\"+ texture_data.name);\n\t\tlet index = texture_data.last_accessed_index;\n\t\tif(index === -1)\n\t\t\treturn;\n\t\t\n  \tthis.write_offset.y = Math.floor(index/this.batch_width);\n  \tthis.write_offset.x = index - this.batch_width*this.write_offset.y;\n\t\trenderer.copyTextureToTexture(\n\t\t\tthis.write_offset, \n\t\t\ttexture_data.one_pixel, \n\t\t\ttexture_data.dst\n\t\t);\n\t}\n\n\tget_mesh()\n\t{\n\t\treturn new THREE.Mesh(this.geometry, this.material);\n\t}\n\n\t__set_pixel_rgb(data_texture, index, vector3, use_r, use_g, use_b)\n\t{\n\t\tif(use_r)\n\t\t\tdata_texture.image.data[index*3+0] = vector3.x;\t    \n\t\tif(use_g)\n\t\t\tdata_texture.image.data[index*3+1] = vector3.y;\t    \n\t\tif(use_b)\n\t\t\tdata_texture.image.data[index*3+2] = vector3.z;\t\n\t}\n\t__set_pixel_rgba(data_texture, index, vector4, use_r, use_g, use_b, use_a)\n\t{\n\t\tif(use_r)\n\t\t\tdata_texture.image.data[index*4+0] = vector4.x;\t    \n\t\tif(use_g)\n\t\t\tdata_texture.image.data[index*4+1] = vector4.y;\t    \n\t\tif(use_b)\n\t\t\tdata_texture.image.data[index*4+2] = vector4.z;\t\n\t\tif(use_a)\n\t\t\tdata_texture.image.data[index*4+3] = vector4.w;\n\t}\n\n\t__flood_data_texture_rgb(data_texture, v3)\n\t{\n\t\tfor(let i=0; i< this.batch_width * this.batch_width; i++)\n\t\t{\n\t\t\tthis.__set_pixel_rgb(data_texture.src, i, v3, true, true, true);\n\t\t\tdata_texture.dirty_count++;\n\t\t}\n\t}\n\n\t__flood_data_texture_rgba(data_texture, v4)\n\t{\n\t\tfor(let i=0; i< this.batch_width * this.batch_width; i++)\n\t\t{\n\t\t\tthis.__set_pixel_rgba(data_texture.src, i, v4, true, true, true, true);\n\t\t\tdata_texture.dirty_count++;\n\t\t}\n\t}\n\n\n\t__create_rgb_texture(width)\n\t{\n\t\tlet data = new Uint8Array( 3 * width * width );\n\t\treturn new THREE.DataTexture( data, width, width, THREE.RGBFormat );\n\t}\n\t__create_rgba_texture(width)\n\t{\n\t\tlet data = new Uint8Array( 4 * width * width );\n\t\treturn new THREE.DataTexture( data, width, width, THREE.RGBAFormat );\n\t}\n\n\t__create_rgba_float_texture(width)\n\t{\n\t\tlet data = new Float32Array( 4 * width * width );\n\t\treturn new THREE.DataTexture( data, width, width, THREE.RGBA, THREE.FloatType );\n\t}\n\n\t__get_data_texture(uniform_name)\n\t{\n\t\tfor(let i=0; i< this.data_textures.length; i++)\n\t\t{\n\t\t\tif(this.data_textures[i].name === uniform_name)\n\t\t\t\treturn this.data_textures[i];\n\t\t}\n\t\tconosle.error(\"Data texture \"+uniform_name+\" does not exist\");\n\t\treturn undefined;\n\t}\n\t__get_object_index(name)\n\t{\n\t\tfor(let i=0; i< this.object_names.length; i++)\n\t\t{\n\t\t\tif(this.object_names[i] === name)\n\t\t\t\treturn i;\n\t\t}\n\t\tconsole.error(\"the name \"+name+\" is not contained in this batch\");\n\t\treturn undefined;\n\t}\n\n\t__add_data_texture(uniform_name, src_texture, dst_texture, one_pixel_text)\n\t{\n\t\tdst_texture.needsUpdate = true;\n\n\t\tthis.data_textures.push({\n\t\t\tname: uniform_name,\n\t\t\tsrc: src_texture, \n\t\t\tdst: dst_texture,\n\t\t\tone_pixel: one_pixel_text,\n\t\t\tlast_accessed_index: -1,\n\t\t\tdirty_count: 0\n\t\t});\n\n\t\tthis.uniforms[uniform_name] = {value: dst_texture};\n\t\treturn this.data_textures[this.data_textures.length-1];\n\t}\n\n\tdispose()\n\t{\n\t\tfor(let i=0; i< this.data_textures.length; i++)\n\t\t{\n\t\t\tthis.data_textures[i].src.dispose();\n\t\t\tthis.data_textures[i].dst.dispose();\n\t\t\tthis.data_textures[i].one_pixel.dispose();\n\t\t}\n\t}\n\n\t\n}","import GeometryBatch from '/static_batcher/GeometryBatch'\n\nclass GeometryBatcher\n{\n\tconstructor()\n\t{\n\t\tthis.batches = [];\n\t}\n\n\tbatch(buffer_geometries)\n\t{\n\t  let attr_accessor_uvs = [];\n\t  let texture_width = THREE.Math.ceilPowerOfTwo(Math.sqrt(buffer_geometries.length));\n\t  // console.log(\"Store count: \" + buffer_geometries.length + \", Texture size: \" +texture_width);\n\n\t  this.__init_uv_array(attr_accessor_uvs, texture_width);\n\n\n\t  let uv_index = 0;\n\n\t  for(let i=0; i< buffer_geometries.length; i++)\n\t  {\n\t    let vertex_count = buffer_geometries[i].getAttribute('position').count;\n\t    let y = Math.floor(i/texture_width);\n\t    let x = i - texture_width*y;\n\t    for(let count = 0; count < vertex_count; count++)\n\t    {\n\n\t      attr_accessor_uvs[uv_index] = (x/texture_width) + 0.5/texture_width;\n\t      attr_accessor_uvs[uv_index+1] = (y/texture_width) + 0.5/texture_width;\n\t      uv_index+=2;\n\t    }\n\t  }\n\n\t  let buffer_attribute = new THREE.BufferAttribute( new Float32Array( attr_accessor_uvs ), 2);\n\t  let buffer_geometry = THREE.BufferGeometryUtils.mergeBufferGeometries(buffer_geometries);\n\t  buffer_geometry.setAttribute( 'attr_accessor_uv', buffer_attribute);\n\n\t  this.batches.push(new GeometryBatch(buffer_geometry, texture_width));\n\t  return this.batches[this.batches.length-1];\n\n\t}\n\n\tupload_texture_data(renderer)\n\t{\n\t\tfor(let i=0; i< this.batches.length; i++)\n\t\t{\n\t\t\tthis.batches[i].upload_texture_data(renderer, 1);\n\t\t}\n\t}\n\n\n\n\t__init_uv_array(uvs, texture_width)\n\t{\n\t\tfor(let i=0; i< texture_width*texture_width*2; i++)\n\t  {\n\t    uvs.push(0);\n\t  }\n\t}\n}\n\n\nconst geometry_batcher = new GeometryBatcher();\nmodule.exports = geometry_batcher;\n","import Time from '/Time';\nimport Input from '/Input';\nimport UI from '/UI';\nimport Debug from '/Debug';\nimport GeometryBatcher from '/static_batcher/GeometryBatcher';\nimport BaseApplication from '/BaseApplication';\n\nexport default class RenderLoop {\n\n  constructor(target_application, renderer) {\n\n    target_application = target_application || new BaseApplication();\n\n    this._frame_id = -1;\n\n    this.target_application = target_application;\n    this.renderer = renderer;\n\n    this.is_running = true;\n    this.frames_passed = 0;\n\n  }\n\n  update() {\n\n    if(!this.is_running)\n      return;\n\n    Time.__update();\n    Debug.clear();\n\n    //###### START CYCLE ######\n    if (this.frames_passed === 5) {\n      this.target_application.post_start();\n    }\n\n    this.target_application.update();\n\n    this.target_application.on_pre_render();\n\n    this.renderer.update();     // render scene\n    UI.update();                // update after new camera matrix has been calculated\n    UI.render(this.renderer);   // render ui layer on top\n\n    this.target_application.on_post_render();\n\n    if(Debug.rt_debug)\n      this.renderer.blit(Debug.rt_debug);\n    //###### END  CYCLE #######\n    Input.clear();\n    UI.clear();\n\n    //   GeometryBatcher.upload_texture_data(this.renderer);\n\n    this._frame_id = requestAnimationFrame(this.update.bind(this));\n    this.frames_passed++;\n  }\n\n  start() {\n    this.target_application.start();\n    this.update();\n    this.is_running = true;\n\n\n  }\n\n  stop() {\n    this.is_running = false;\n    this.target_application.end();\n\n    cancelAnimationFrame(this._frame_id);\n  }\n}\n","export default class AbstractLoader\r\n{\r\n\tconstructor(resource_id, url)\r\n\t{\r\n\t\tthis.progress = 0;\r\n\t\tthis.resource_id = resource_id;\r\n\t\tthis.url = url;\r\n\r\n\t\tthis.has_finished = false;\r\n\t\tthis.has_error = false;\r\n\t\tthis.error_message = \"none\";\r\n\t}\r\n\r\n\t__update_progress(value)\r\n\t{\r\n\t\tthis.progress = value;\r\n\t}\r\n\t__loading_ended()\r\n\t{\r\n\t\tthis.has_finished = true;\r\n\t}\r\n\t__set_error(message)\r\n\t{\r\n\t\tthis.has_error = true;\r\n\t\tthis.error_message = message;\r\n\t}\r\n\r\n\tprint_error()\r\n\t{\r\n\t\tconsole.error(\"Error while loading \"+this.resource_id+\"\\n\\t path: \"+this.url+\"\\n\\t\\t\"+this.error_message);\r\n\t}\r\n\r\n\tload(resource_container) {\r\n\r\n\t}\r\n}\r\n","import AbstractLoader from '/resource_loader/AbstractLoader';\r\n\r\nexport default class TextureLoader extends AbstractLoader\r\n{\r\n\tconstructor(resource_id, url)\r\n\t{\r\n\t\tsuper(resource_id, url);\r\n\t\tthis.loader = new THREE.TextureLoader();\r\n\t}\r\n\r\n\tload(resource_container)\r\n\t{\r\n\t\tlet ctx = this;\r\n\r\n\t\tthis.loader.load(\tthis.url, (image)=> {\r\n\t\t\tresource_container.set_resource(ctx.resource_id, image);\r\n\t\t\t\tctx.__update_progress(1);\r\n\t\t\t\tctx.__loading_ended()\r\n\t\t\t},\r\n\t\t\tundefined,\r\n\t\t\t() => {\r\n\t\t\t\tctx.__set_error(\"Image could not  be loaded. Maybe wrong name or path, I don't know\" + '¯\\\\_(ツ)_/¯');\r\n\t\t\t\tctx.__loading_ended()\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import AbstractLoader from '/resource_loader/AbstractLoader';\r\n\r\nexport default class GLTFLoader extends AbstractLoader\r\n{\r\n\tconstructor(resource_id, url)\r\n\t{\r\n\t\tsuper(resource_id, url);\r\n\t\tthis.loader = new THREE.GLTFLoader();\r\n\t}\r\n\r\n\tload(resource_container)\r\n\t{\r\n\t\tlet ctx = this;\r\n\r\n\t\tthis.loader.load(\tthis.url, (gltf)=> {\r\n\t\t\tresource_container.set_resource(ctx.resource_id, gltf);\r\n\t\t\t\tctx.__update_progress(1);\r\n\t\t\t\tctx.__loading_ended()\r\n\t\t\t},\r\n\t\t\t(xhr) =>{\r\n\t\t\t\tctx.__update_progress(xhr.loaded/xhr.total);\r\n\t\t\t},\r\n\t\t\t(msg) => {\r\n\t\t\t\tctx.__set_error(msg +\"\\n\\n\\t If the error says something about unexpected token < in JSON then the probably the problem is related to the file not being found. Check the name and path of the resource\");\r\n\t\t\t\tctx.__loading_ended()\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import AbstractLoader from '/resource_loader/AbstractLoader';\r\n\r\nexport default class DAELoader extends AbstractLoader\r\n{\r\n\tconstructor(resource_id, url)\r\n\t{\r\n\t\tsuper(resource_id, url);\r\n\t\tthis.loader = new THREE.ColladaLoader();\r\n\t}\r\n\r\n\tload(resource_container)\r\n\t{\r\n\t\tlet ctx = this;\r\n\r\n\t\tthis.loader.load(\tthis.url, (gltf)=> {\r\n\t\t\tresource_container.set_resource(ctx.resource_id, gltf);\r\n\t\t\t\tctx.__update_progress(1);\r\n\t\t\t\tctx.__loading_ended()\r\n\t\t\t},\r\n\t\t\t(xhr) =>{\r\n\t\t\t\tctx.__update_progress(xhr.loaded/xhr.total);\r\n\t\t\t},\r\n\t\t\t(msg) => {\r\n\t\t\t\tctx.__set_error(msg +\"\\n\\n\\t If the error says something about unexpected token < in JSON then the probably the problem is related to the file not being found. Check the name and path of the resource\");\r\n\t\t\t\tctx.__loading_ended()\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import AbstractLoader from '/resource_loader/AbstractLoader';\r\n\r\nexport default class TextLoader extends AbstractLoader\r\n{\r\n\tconstructor(resource_id, url)\r\n\t{\r\n\t\tsuper(resource_id, url);\r\n\t\tthis.loader = new THREE.FileLoader();\r\n\t}\r\n\r\n\tload(resource_container)\r\n\t{\r\n\t\tlet ctx = this;\r\n\r\n\t\tthis.loader.load(\tthis.url, (gltf)=> {\r\n\t\t\tresource_container.set_resource(ctx.resource_id, gltf);\r\n\t\t\t\tctx.__update_progress(1);\r\n\t\t\t\tctx.__loading_ended()\r\n\t\t\t},\r\n\t\t\t(xhr) =>{\r\n\t\t\t\tctx.__update_progress(xhr.loaded/xhr.total);\r\n\t\t\t},\r\n\t\t\t(msg) => {\r\n\t\t\t\tctx.__set_error(msg);\r\n\t\t\t\tctx.__loading_ended()\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import AbstractLoader from '/resource_loader/AbstractLoader';\r\n\r\nexport default class CubemapLoader extends AbstractLoader\r\n{\r\n\tconstructor(resource_id, url)\r\n\t{\r\n\t\tsuper(resource_id, url);\r\n\t\tthis.loader = new THREE.CubeTextureLoader();\r\n\r\n\t\tthis.urls = [];\r\n\t\tthis.urls.push(url);\r\n\t\tthis.urls.push(url);\r\n\t\tthis.urls.push(url);\r\n\t\tthis.urls.push(url);\r\n\t\tthis.urls.push(url);\r\n\t\tthis.urls.push(url);\r\n\t}\r\n\r\n\tload(resource_container)\r\n\t{\r\n\t\tlet ctx = this;\r\n\r\n\t\tthis.loader.load(\tthis.urls, (image)=> {\r\n\t\t\tresource_container.set_resource(ctx.resource_id, image);\r\n\t\t\t\tctx.__update_progress(1);\r\n\t\t\t\tctx.__loading_ended()\r\n\t\t\t},\r\n\t\t\tundefined,\r\n\t\t\t(error) => {\r\n\t\t\t\tctx.__set_error(\"Image could not  be loaded. Maybe wrong name or path, I don't know\" + '¯\\\\_(ツ)_/¯', error);\r\n\t\t\t\tctx.__loading_ended()\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import AbstractLoader from '/resource_loader/AbstractLoader';\r\n\r\nexport default class AudioLoader extends AbstractLoader\r\n{\r\n\tconstructor(resource_id, url, listener, loop, volume)\r\n\t{\r\n\t\tsuper(resource_id, url);\r\n\t\tthis.loader = new THREE.AudioLoader();\r\n\t\tthis.loop = loop;\r\n\t\tthis.listener = listener;\r\n\t\tthis.voluem = volume;\r\n\t}\r\n\r\n\tload(resource_container)\r\n\t{\r\n\t\tlet ctx = this;\r\n\t\tlet sound = new THREE.Audio(this.listener);\r\n\r\n\t\tthis.loader.load(this.url, (audio)=> {\r\n\t\t\tsound.setBuffer(audio);\r\n\t\t\tsound.setLoop(this.loop);\r\n\t\t\tsound.setVolume(this.voluem);\r\n\r\n\t\t\tresource_container.set_resource(ctx.resource_id, sound);\r\n\r\n\t\t\tif (!resource_container.get_resource('audio_listener')) {\r\n\t\t\t\tresource_container.set_resource('audio_listener', this.listener);\r\n\t\t\t}\r\n\r\n\t\t\tctx.__update_progress(1);\r\n\t\t\tctx.__loading_ended()\r\n\t\t},\r\n\t\tundefined,\r\n\t\t(error) => {\r\n\t\t\tctx.__set_error(\"Audio could not be loaded. Maybe wrong name or path, I don't know\" + '¯\\\\_(ツ)_/¯', error);\r\n\t\t\tctx.__loading_ended()\r\n\t\t});\r\n\t}\r\n\r\n}\r\n","import AbstractLoader from '/resource_loader/AbstractLoader';\n\nexport default class JSONLoader extends AbstractLoader {\n\tconstructor(resource_id, url, username, password) {\n\t\tsuper(resource_id, url);\n\n\t\tthis.loader = new THREE.FileLoader();\n\t\tthis.username = username;\n\t\tthis.password = password;\n\t\tthis.resource_container = undefined;\n\t}\n\n\tload(resource_container) {\n\t\t// let headers = new Headers();\n\t\tlet headers = {};\n\t\tthis.resource_container = resource_container;\n\n\t\tif (this.username !== undefined && this.password !== undefined) {\n\t\t\theaders['Authorization'] = `Basic ${btoa(`${this.username}:${this.password}`)}`\n\t\t}\n\n\t\tfetch(this.url, { headers: headers })\n\t\t\t.then(this.__parse_to_json.bind(this))\n\t\t\t.then(this.__set_resource.bind(this))\n\t}\n\n\t__parse_to_json(response) {\n\t\treturn response.json();\n\t}\n\n\t__set_resource(data) {\n\t\tthis.resource_container.set_resource(this.resource_id, data);\n\n\t\tthis.__update_progress(1);\n\t\tthis.__loading_ended();\n\t}\n\n}\n","import AbstractLoader from '/resource_loader/AbstractLoader';\n\nexport default class OBJLoader extends AbstractLoader {\n    constructor(resource_id, url) {\n        super(resource_id, url);\n        this.loader = new THREE.OBJLoader();\n    }\n\n    load(resource_container) {\n        let ctx = this;\n\n        this.loader.load(this.url, (gltf) => {\n            resource_container.set_resource(ctx.resource_id, gltf);\n            ctx.__update_progress(1);\n            ctx.__loading_ended()\n        },\n            (xhr) => {\n                ctx.__update_progress(xhr.loaded / xhr.total);\n            },\n            (msg) => {\n                ctx.__set_error(msg + \"\\n\\n\\t If the error says something about unexpected token < in JSON then probably the problem is related to the file not being found. Check the name and path of the resource\");\n                ctx.__loading_ended()\n            }\n        );\n    }\n\n}\n","import EventManager from '/EventManager';\n\nclass ResourceContainer\n{\n\tconstructor()\n\t{\n\t\tthis.resources = {};\n\t}\n\n\tset_resource(name, resource)\n\t{\n\t\tthis.resources[name] = resource;\n\t\tEventManager.fire_resource_loaded({name: name, value: resource});\n\t}\n\n\tget_resource(name)\n\t{\n\t\treturn this.resources[name];\n\t}\n\tget(name)\n\t{\n\t\treturn this.resources[name];\n\t}\n\n}\n\nconst resource_container = new ResourceContainer();\nmodule.exports = resource_container;\n","import TextureLoader from '/resource_loader/TextureLoader';\r\nimport GLTFLoader from '/resource_loader/GLTFLoader';\r\nimport DAELoader from '/resource_loader/DAELoader';\r\nimport TextLoader from '/resource_loader/TextLoader';\r\nimport CubemapLoader from '/resource_loader/CubemapLoader';\r\nimport AudioLoader from '/resource_loader/AudioLoader';\r\nimport JSONLoader from '/resource_loader/JSONLoader';\r\nimport OBJLoader from '/resource_loader/OBJLoader';\r\nimport ResourceContainer from '/ResourceContainer';\r\n\r\nexport default class ResourceBatch\r\n{\r\n\tconstructor(batch_name)\r\n\t{\r\n\t\tthis.resource_loaders = [];\r\n\t\tthis.batch_name = batch_name || \"unnamed batch\";\r\n\t}\r\n\r\n\tadd_texture(resource_id, url)\r\n\t{\r\n\t\tthis.resource_loaders.push(new TextureLoader(resource_id, url));\r\n\t}\r\n\r\n\tadd_gltf(resource_id, url)\r\n\t{\r\n\t\tthis.resource_loaders.push(new GLTFLoader(resource_id, url));\r\n\t}\r\n\tadd_dae(resource_id, url)\r\n\t{\r\n\t\tthis.resource_loaders.push(new DAELoader(resource_id, url));\r\n\t}\r\n\tadd_obj(resource_id, url)\r\n\t{\r\n\t\tthis.resource_loaders.push(new OBJLoader(resource_id, url));\r\n\t}\r\n\tadd_text(resource_id, url)\r\n\t{\r\n\t\tthis.resource_loaders.push(new TextLoader(resource_id, url));\r\n\t}\r\n\tadd_cubemap(resource_id, url)\r\n\t{\r\n\t\tthis.resource_loaders.push(new CubemapLoader(resource_id, url));\r\n\t}\r\n\tadd_audio(resource_id, url, listener, loop, volume) {\r\n\t\tthis.resource_loaders.push(new AudioLoader(resource_id, url, listener, loop, volume));\r\n\t}\r\n\tadd_json(resource_id, url, username, password) {\r\n\t\tthis.resource_loaders.push(new JSONLoader(resource_id, url, username, password));\r\n\t}\r\n\r\n\tload(resource_container)\r\n\t{\r\n\t\tfor(let i=0; i< this.resource_loaders.length; i++)\r\n\t\t{\r\n\t\t\tthis.resource_loaders[i].load(resource_container || ResourceContainer);\r\n\t\t}\r\n\t}\r\n\r\n\tget loading_finished()\r\n\t{\r\n\t\tlet finished = true;\r\n\t\tfor(let i=0; i< this.resource_loaders.length; i++)\r\n\t\t{\r\n\t\t\tfinished = finished && this.resource_loaders[i].has_finished;\r\n\t\t}\r\n\t\treturn finished;\r\n\t}\r\n\r\n\tget has_errors()\r\n\t{\r\n\t\tlet has_error = false;\r\n\t\tfor(let i=0; i< this.resource_loaders.length; i++)\r\n\t\t{\r\n\t\t\thas_error = has_error || this.resource_loaders[i].has_error;\r\n\t\t}\r\n\t\treturn has_error;\r\n\t}\r\n\r\n\tprint_errors()\r\n\t{\r\n\t\tconsole.error(\"Batch <\"+this.batch_name+\"> could not load successfully\")\r\n\t\tfor(let i=0; i< this.resource_loaders.length; i++)\r\n\t\t{\r\n\t\t\tif(this.resource_loaders[i].has_error)\r\n\t\t\t\tthis.resource_loaders[i].print_error();\r\n\t\t}\r\n\t}\r\n\r\n\tget_progress()\r\n\t{\r\n\t\tlet progress = 0;\r\n\t\tfor(let i=0; i< this.resource_loaders.length; i++)\r\n\t\t{\r\n\t\t\tprogress+=this.resource_loaders[i].progress;\r\n\t\t}\r\n\t\treturn progress/this.resource_loaders.length;\r\n\t}\r\n}\r\n","// This class helps with parsing an entire recording that spans several days, into one-day recordings\n// that start at 0:00:00 and ends at 23:59:59, except for the first and last day of a recording range\nexport default class TimeUtilities\n{\n\tconstructor(){}\n\n\n  static get full_day_ms()\n  {\n    return 86400000;\n  }\n\n  static get_days_between(start_date, end_date)\n  {\n  \t// \tlet startDate = moment.parseZone(\"2020-03-15T18:31:23.623794-04:00\");\n\t\t// let endDate \t= moment.parseZone(\"2020-03-23T12:17:06.815451-04:00\");\n  \tlet startDate = moment.parseZone(start_date);\n\t\tlet endDate \t= moment.parseZone(end_date);\n\t\tlet duration  = moment.duration(endDate.diff(startDate));\n    let days \t\t\t= Math.ceil(duration.asDays());\n\n\t\tlet start,end;\n\t\tlet days_array = [];\n\n    for(let i = 0; i<=days; i++){\n\n      if(startDate.date() === endDate.date())\n      {\n        start = startDate;\n        end = endDate;\n      }\n      else\n      {\n        if(i == 0){\n          start = startDate;\n          end = moment(startDate).endOf(\"day\");\n        }else if(i == days){\n          start = moment(endDate).startOf('day');\n          end = endDate;\n        } else {\n          start = moment(startDate).add('days', i).startOf('day');\n          end = moment(startDate).add('days', i).endOf('day');\n        }\n      }\n\n\n\t\t  days_array.push({\n\t\t  \tstart: moment(start),\n\t\t  \tend: moment(end),\n\t\t  \tduration_in_seconds: moment.duration(moment(end).diff(moment(start))).asSeconds(),\n        absolute_start_date: start_date,\n        absolute_end_date: end_date\n\t\t  })\n\n\t\t}\n\n\t\treturn days_array;\n  }\n\n}\n\n","export default class Validation\n{\n\tconstructor(){}\n\n  static is_int(n) {\n    return Number(n) === n && n % 1 === 0;\n  }\n\n  static is_float(n) {\n    return Number(n) === n && n % 1 !== 0;\n  }\n\n  static is_json(str)\n  {\n    try {\n      JSON.parse(str);\n    } catch (e) {\n      return false;\n    }\n\n    return true;\n  }\n}\n","module.exports=\"#define GLSLIFY 1\\nuniform vec3 _Color;\\n\\nvarying vec3 vBarycentric;\\n\\nfloat edgeFactor(vec3 baryc ){\\n    vec3 d = fwidth(baryc);\\n    vec3 a3 = smoothstep(vec3(0.0), d*1.5, baryc);\\n    return min(min(a3.x, a3.y), a3.z);\\n}\\n\\nvoid main()\\n{\\t\\n\\tfloat alpha = edgeFactor(vBarycentric + vec3(1. , 1., 0.));\\n\\tgl_FragColor.rgb = mix(_Color, vec3(0.), alpha);\\n\\tgl_FragColor.a = 1.0 - alpha;\\n\\tgl_FragColor.a *= 0.2;\\n}\";","module.exports=\"#define GLSLIFY 1\\nattribute vec3 barycentric;\\nvarying vec3 vBarycentric;\\nvoid main()\\n{\\n\\n  mat4 VP = projectionMatrix * viewMatrix;\\n  vec3 pos = (modelMatrix * vec4(position, 1.0)).xyz;\\n  gl_Position = VP * vec4(pos, 1.0);\\n  vBarycentric = barycentric;\\n}\";","export default class GeometryUtilities\n{\n\tstatic convert_to_non_indexed_geometry(geometry_buffer)\n\t{\n\t\tlet indices = geometry_buffer.index;\n\t\tlet positions = geometry_buffer.getAttribute(\"position\");\n\n\t\tlet bar_coordinates = [];\n\t\tlet vertices = [];\n\n\t\tfor(let i=0; i< indices.count; i+=3)\n\t\t{\n\t\t\t// VERTEX 1\n\t\t\tvertices.push(positions.getX(indices.array[i+0]));\n\t\t\tvertices.push(positions.getY(indices.array[i+0]));\n\t\t\tvertices.push(positions.getZ(indices.array[i+0]));\n\n\t\t\tbar_coordinates.push(1);\n\t\t\tbar_coordinates.push(0);\n\t\t\tbar_coordinates.push(0);\n\n\n\t\t\t// VERTEX 2\n\n\t\t\tvertices.push(positions.getX(indices.array[i+1]));\n\t\t\tvertices.push(positions.getY(indices.array[i+1]));\n\t\t\tvertices.push(positions.getZ(indices.array[i+1]));\n\n\t\t\tbar_coordinates.push(0);\n\t\t\tbar_coordinates.push(1);\n\t\t\tbar_coordinates.push(0);\n\n\n\t\t\t// VERTEX 3\n\n\t\t\tvertices.push(positions.getX(indices.array[i+2]));\n\t\t\tvertices.push(positions.getY(indices.array[i+2]));\n\t\t\tvertices.push(positions.getZ(indices.array[i+2]));\n\n\t\t\tbar_coordinates.push(0);\n\t\t\tbar_coordinates.push(0);\n\t\t\tbar_coordinates.push(1);\n\n\n\t\t}\n\n\t\tlet geometry = new THREE.BufferGeometry();\n\t\t// geometry.setAttribute('barycentric', new THREE.BufferAttribute( new Float32Array(bar_coordinates), 3 ));\n\t\tgeometry.setAttribute('position', new THREE.BufferAttribute( new Float32Array(vertices), 3 ) );\n\t\tGeometryUtilities.add_barycentric_attribute(geometry);\n\t\treturn geometry;\n\t}\n\n\tstatic add_barycentric_attribute(non_indexed_geometry_buffer)\n\t{\n\t\tlet bar_coordinates = [];\n\t\tlet positions = non_indexed_geometry_buffer.getAttribute(\"position\");\n\n\t\tfor(let i=0; i< positions.count; i+=3)\n\t\t{\n\t\t\tbar_coordinates.push(1);\n\t\t\tbar_coordinates.push(0);\n\t\t\tbar_coordinates.push(0);\n\n\t\t\tbar_coordinates.push(0);\n\t\t\tbar_coordinates.push(1);\n\t\t\tbar_coordinates.push(0);\n\n\t\t\tbar_coordinates.push(0);\n\t\t\tbar_coordinates.push(0);\n\t\t\tbar_coordinates.push(1);\n\n\t\t}\n\t\tnon_indexed_geometry_buffer.setAttribute('barycentric', new THREE.BufferAttribute( new Float32Array(bar_coordinates), 3 ));\n\t}\n}\n","import grid_frag from '/shaders/grid/grid_frag';\nimport grid_vert from '/shaders/grid/grid_vert';\nimport GeometryUtilities from '/utilities/GeometryUtilities';\n\nexport default class Grid extends THREE.Mesh {\n\tconstructor()\n\t{\n\n\t\tlet material = new THREE.ShaderMaterial({\n      uniforms: {\n      \t_Color: {value: new THREE.Color(\"#919191\")}\n      },\n      vertexShader: grid_vert,\n      fragmentShader: grid_frag,\n      extensions: {derivatives: true},\n      transparent: true,\n      depthWrite: false\n    });\n\n\n    let plane_geometry = new THREE.PlaneBufferGeometry( 100, 100, 100,100 );\n\n\t\tlet non_indexed_geometry = GeometryUtilities.convert_to_non_indexed_geometry(plane_geometry);\n\n\t\tsuper(non_indexed_geometry, material);\n\n\t\tthis.rotation.x = -3.14/2;\n\t}\n\n}\n","import Grid from '/components/Grid';\nexport default {\n  Grid: Grid\n}\n","import ArrayUtilities from '/utilities/ArrayUtilities.js';\nimport BaseApplication from '/BaseApplication';\nimport BaseShaderMaterial from '/materials/BaseShaderMaterial';\nimport CameraManager from '/CameraManager';\nimport CameraUtilities from '/utilities/CameraUtilities';\nimport Capabilities from '/Capabilities';\nimport Configuration from '/Configuration';\nimport EasingFunctions from '/utilities/EasingFunctions';\nimport EventManager from '/EventManager';\nimport Debug from '/Debug';\nimport Graphics from '/Graphics';\nimport Input from '/Input';\nimport MathUtilities from '/utilities/MathUtilities';\nimport NormalRender from '/render_mode/NormalRender';\nimport ObjectUtilities from '/utilities/ObjectUtilities';\nimport PerspectiveCamera from '/PerspectiveCamera';\nimport RenderLoop from '/RenderLoop';\nimport ResourceBatch from '/resource_loader/ResourceBatch';\nimport ResourceContainer from '/ResourceContainer';\nimport SceneManager from '/SceneManager';\nimport Screen from '/Screen';\nimport Time from '/Time';\nimport TimeUtilities from '/utilities/TimeUtilities';\nimport Validation from '/utilities/Validation';\nimport Components from '/Components';\n\nmodule.exports = {\n  ArrayUtilities: ArrayUtilities,\n  BaseApplication: BaseApplication,\n  BaseShaderMaterial: BaseShaderMaterial,\n  CameraManager: CameraManager,\n  CameraUtilities: CameraUtilities,\n  Capabilities: Capabilities,\n  Configuration: Configuration,\n  EasingFunctions: EasingFunctions,\n  EventManager: EventManager,\n  Debug: Debug,\n  Graphics: Graphics,\n  Input: Input,\n  MathUtilities: MathUtilities,\n  NormalRender: NormalRender,\n  ObjectUtilities: ObjectUtilities,\n  PerspectiveCamera: PerspectiveCamera,\n  RenderLoop: RenderLoop,\n  ResourceBatch: ResourceBatch,\n  ResourceContainer: ResourceContainer,\n  SceneManager: SceneManager,\n  Screen: Screen,\n  Time: Time,\n  TimeUtilities: TimeUtilities,\n  Validation: Validation,\n  Components: Components\n}\n"]}